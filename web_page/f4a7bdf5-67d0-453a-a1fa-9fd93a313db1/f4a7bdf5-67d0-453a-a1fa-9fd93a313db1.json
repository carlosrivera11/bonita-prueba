{"designerVersion":"1.2.19","favorite":false,"id":"f4a7bdf5-67d0-453a-a1fa-9fd93a313db1","name":"referenciacion","type":"form","lastUpdate":1478883009608,"rows":[[{"type":"container","dimension":{"xs":12,"sm":12,"md":2,"lg":2},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"repeatedCollection":{"type":"variable"}},"reference":"d46ea654-13e1-496a-b61a-c4ec8dc5f56b","rows":[[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"text":{"type":"interpolation","value":""},"alignment":{"type":"constant","value":"left"}},"reference":"35318437-36e0-47ab-b768-4b8b3eaca04c","id":"pbText"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":"textPanel imagenPanel"},"hidden":{"type":"constant","value":false},"text":{"type":"interpolation","value":"<br><br><em>Recuerda, los campos marcados con asterisco (*) son obligatorios.<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></em>"},"alignment":{"type":"constant","value":"left"}},"reference":"0efa4c38-7f01-44b9-a0b5-85b3c504acb3","id":"pbText"}]]},{"type":"formContainer","dimension":{"xs":12,"sm":12,"md":10,"lg":10},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false}},"reference":"3a4604ac-0a0a-4e83-ac6f-7767603ef5e6","container":{"type":"container","dimension":{"xs":12},"propertyValues":{},"reference":"c3fce0c0-46f4-4241-bc19-c2c12e707fc6","rows":[[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"text":{"type":"interpolation","value":""},"alignment":{"type":"constant","value":"left"}},"reference":"13603226-f82b-441a-853b-8a3db9abdf6b","id":"pbText"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":"backgroundTitlle"},"hidden":{"type":"constant","value":false},"text":{"type":"interpolation","value":"REFERENCIACIÓN"},"level":{"type":"constant","value":"Level 4"},"alignment":{"type":"constant","value":"center"}},"reference":"863c3213-6c4b-4090-ac53-e406d4d8b5ff","id":"pbTitle"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"text":{"type":"interpolation","value":""},"alignment":{"type":"constant","value":"left"}},"reference":"a3b201ca-1cf3-4480-8dd4-f74e0d3c5b00","id":"pbText"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"text":{"type":"interpolation","value":"DATOS CLIENTE"},"level":{"type":"constant","value":"Level 5"},"alignment":{"type":"constant","value":"center"}},"reference":"76e01f5c-4883-4008-a867-9c0b9b635792","id":"pbTitle"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"text":{"type":"interpolation","value":""},"alignment":{"type":"constant","value":"left"}},"reference":"3a31b002-3aea-42f0-b472-0132fc7b5a7c","id":"pbText"}],[{"type":"fragment","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false}},"reference":"b1c4e4e0-56c7-4427-957f-e865f953cf31","id":"43694ce6-7b2a-4366-a8d1-b85a45e0033c","binding":{}}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"text":{"type":"interpolation","value":""},"alignment":{"type":"constant","value":"left"}},"reference":"0bc0a0f8-e1e3-40c0-95e1-b9263bab8d14","id":"pbText"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"readOnly":{"type":"constant","value":false},"required":{"type":"constant","value":true},"minLength":{"type":"constant","value":""},"maxLength":{"type":"constant","value":500},"labelHidden":{"type":"constant","value":false},"label":{"type":"interpolation","value":"Observaciones"},"labelPosition":{"type":"constant","value":"top"},"labelWidth":{"type":"constant","value":4},"value":{"type":"variable","value":"formInput.c_referenciacion.observaciones"}},"reference":"67c5cd13-fb66-4031-8810-4a0e6d8255c1","id":"pbTextarea"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":"validator"},"hidden":{"type":"constant","value":false},"text":{"type":"interpolation","value":"Máximo 500 caracteres."},"alignment":{"type":"constant","value":"right"}},"reference":"5e534475-e76a-408a-81dc-4df8e35dcdd3","id":"pbText"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":6,"lg":6},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"disabled":{"type":"constant","value":false},"required":{"type":"constant","value":true},"labelHidden":{"type":"constant","value":false},"label":{"type":"interpolation","value":"Próximo Paso"},"labelPosition":{"type":"constant","value":"top"},"labelWidth":{"type":"constant","value":4},"placeholder":{"type":"interpolation","value":"Select an option"},"availableValues":{"type":"expression","value":"listaProximoPaso"},"displayedKey":{"type":"constant","value":"nombre"},"returnedKey":{"type":"constant"},"value":{"type":"variable","value":"formInput.c_referenciacion.proximoPaso"}},"reference":"b7a18b27-04db-45fa-aec4-672a92ed6aca","id":"pbSelect"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"text":{"type":"interpolation","value":""},"alignment":{"type":"constant","value":"left"}},"reference":"bce13158-edd7-4a39-9409-3d8f444637de","id":"pbText"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":"backgroundTitlleAux"},"hidden":{"type":"expression","value":"!esTipologiaCasuistica"},"text":{"type":"interpolation","value":"Tipologías y Casuísticas"},"level":{"type":"constant","value":"Level 5"},"alignment":{"type":"constant","value":"center"}},"reference":"e95dac61-da6a-442e-934b-10da7d211f0f","id":"pbTitle"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"text":{"type":"interpolation","value":""},"alignment":{"type":"constant","value":"left"}},"reference":"3be7138f-327a-47d4-b459-5167f259b3bc","id":"pbText"}],[{"type":"container","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"expression","value":"!esTipologiaCasuistica"},"repeatedCollection":{"type":"variable","value":"formInput.c_referenciacion.tipologiasCasuisticas"}},"reference":"d45ade1e-48ad-449f-b88e-8f3904e8c002","rows":[[{"type":"fragment","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false}},"reference":"2ab4daae-cfe9-41ec-9e4d-289fb89a96e8","id":"524a5947-ff33-46d9-9a3d-750a6af17b0e","binding":{"tipologiaCasuistica":"$item","values":"formInput"}}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"disabled":{"type":"constant","value":false},"label":{"type":"interpolation","value":"X"},"alignment":{"type":"constant","value":"right"},"buttonStyle":{"type":"constant","value":"danger"},"action":{"type":"constant","value":"Remove from collection"},"url":{"type":"interpolation"},"dataToSend":{"type":"constant"},"dataFromSuccess":{"type":"variable"},"dataFromError":{"type":"variable"},"targetUrlOnSuccess":{"type":"interpolation"},"collectionToModify":{"type":"variable","value":"$collection"},"collectionPosition":{"type":"constant","value":"Item"},"valueToAdd":{"type":"constant"},"removeItem":{"type":"variable","value":"$item"}},"reference":"20774ad2-f396-495e-8449-03c1197168a4","id":"pbButton"}]]}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"expression","value":"!esTipologiaCasuistica"},"disabled":{"type":"constant","value":false},"label":{"type":"interpolation","value":"+"},"alignment":{"type":"constant","value":"right"},"buttonStyle":{"type":"constant","value":"primary"},"action":{"type":"constant","value":"Add to collection"},"url":{"type":"interpolation"},"dataToSend":{"type":"constant"},"dataFromSuccess":{"type":"variable"},"dataFromError":{"type":"variable"},"targetUrlOnSuccess":{"type":"interpolation"},"collectionToModify":{"type":"variable","value":"formInput.c_referenciacion.tipologiasCasuisticas"},"collectionPosition":{"type":"constant","value":"Last"},"valueToAdd":{"type":"expression","value":"{  \"tipologias\" : {    \"id\" : \"\",    \"nombre\" : \"\"  },  \"casuisticas\" : {    \"id\" : \"\",    \"nombre\" : \"\"  }}"},"removeItem":{"type":"variable"}},"reference":"a47f7143-4fbb-41d9-bfcb-eace2716338a","id":"pbButton"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"text":{"type":"interpolation","value":""},"alignment":{"type":"constant","value":"left"}},"reference":"37bea705-b211-4a6a-b007-2730d97242ab","id":"pbText"}],[{"type":"component","dimension":{"sm":12,"md":12,"lg":12,"xs":12},"propertyValues":{"removeItem":{"type":"variable"},"alignment":{"type":"constant","value":"center"},"isDisplayed":{"type":"constant","value":true},"targetUrlOnSuccess":{"type":"interpolation","value":"/bonita"},"class":{"type":"constant","value":"org.bonitasoft.web.designer.experimental.parametrizedWidget.ButtonWidget"},"label":{"type":"constant","value":"Enviar"},"collectionPosition":{"type":"constant"},"buttonStyle":{"type":"constant","value":"primary"},"dimension":{"type":"constant","value":12},"valueToAdd":{"type":"expression"},"collectionToModify":{"type":"variable"},"widgetId":{"type":"constant","value":"pbButton"},"labelHidden":{"type":"constant","value":false},"action":{"type":"constant","value":"Submit task"},"dataToSend":{"type":"expression","value":"formInput"},"readonly":{"type":"constant","value":false},"disabled":{"type":"expression","value":"$form.$invalid"},"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"url":{"type":"interpolation"},"dataFromSuccess":{"type":"variable","value":"succes"},"dataFromError":{"type":"variable"}},"reference":"092ff4e9-f4dc-4c21-bd13-6bae8bfa7fe2","id":"pbButton"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":"validator"},"hidden":{"type":"constant","value":false},"text":{"type":"interpolation","value":"{{validador}}"},"level":{"type":"constant","value":"Level 5"},"alignment":{"type":"constant","value":"center"}},"reference":"3d1f38ed-c336-48db-a41d-f6c204919622","id":"pbTitle"}]]}}]],"assets":[{"id":"4dd1159b-a3a3-4d67-a024-8ae02867e0d7","name":"styleRadicacion.css","type":"css","order":1,"external":false},{"id":"ee520497-5ad1-48d0-ba4c-e6372689b836","name":"localization.json","type":"json","order":0,"external":false}],"inactiveAssets":[],"data":{"taskId":{"type":"urlparameter","value":"id","exposed":false},"formOutput":{"type":"expression","value":"return {\n\t'c_referenciacion': $data.formInput.c_referenciacion\n};","exposed":false},"context":{"type":"url","value":"/bonita/API/bpm/userTask/{{taskId}}/context","exposed":false},"formInput":{"type":"json","value":"{\r\n  \"c_referenciacion\" : {\r\n    \"proximoPaso\" : {\r\n      \"id\" : \"\",\r\n      \"nombre\" : \"\"\r\n    },\r\n    \"tipologiasCasuisticas\" : [\r\n        {\r\n\t\t\t\"tipologias\": {\r\n\t\t\t\t\"id\" : \"\",\r\n\t\t\t\t\"nombre\" : \"\"\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\"casuisticas\": {\r\n\t\t\t\t\"id\" : \"\",\r\n\t\t\t\t\"nombre\" : \"\"\r\n\t\t\t} \r\n        }\r\n\t\t],\r\n    \"observaciones\" : \"\"\r\n  }\r\n}","exposed":false},"succes":{"type":"json","value":"{}","exposed":false},"validador":{"type":"expression","value":"var lista = []\n\ntry{\n    if ($data.formInput.c_referenciacion.observaciones === \"\"){\n        lista.push('El campo observaciones es obligatorio');\n    }\n}catch(Err){}\n\ntry{\n    if ($data.formInput.c_referenciacion.proximoPaso === undefined){\n        lista.push('El campo próximo paso es obligatorio');\n    }\n}catch(Err){}\n\ntry{\n    //if($data.esTipologiaCasuistica){\n        console.log('Entro');\n        $data.formInput.c_referenciacion.tipologiasCasuisticas.forEach(function(element, index, array){\n        console.log('Recorrer');\n        if(element.tipologias === undefined || element.casuisticas === undefined){\n            console.log('Agregar');\n            lista.push('Faltan campos por diligenciar en el grupo de tipologías y casuísticas');\n            }\n        } );\n    //}\n}catch(Err){}\n\nreturn lista [0];","exposed":false},"listaTipologias":{"type":"url","value":"../API/extension/ConsultaListasAPI?c=tipologiaReferenciacion","exposed":false},"listaCasuisticas":{"type":"url","value":"../API/extension/ConsultaListasAPI?c=casuisticaReferenciacion&p={{formInput.c_referenciacion.tipologiasCasuisticas.tipologias.id}}","exposed":false},"listaProximoPaso":{"type":"url","value":"../API/extension/ConsultaListasAPI?c=ppReferenciacion","exposed":false},"esTipologiaCasuistica":{"type":"expression","value":"return $data.formInput.c_referenciacion.proximoPaso.id !== undefined && \n       $data.formInput.c_referenciacion.proximoPaso.id === 7;","exposed":false},"observador":{"type":"expression","value":"try{\r\nif($data.formInput.c_referenciacion.proximoPaso.id === 1){\r\n    $data.formInput.c_referenciacion.tipologiasCasuisticas = [{tipologias:{id: 0,\r\n\t\t\t\t\t\t\t\t\t\t\t\t                      nombre: \"N/A\"},\r\n\t\t\t\t\t\t\t\t\t\t\t\t            casuisticas:{id:0,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t           nombre: \"N/A\"}}];}\r\n}catch(Err){}","exposed":false}}}