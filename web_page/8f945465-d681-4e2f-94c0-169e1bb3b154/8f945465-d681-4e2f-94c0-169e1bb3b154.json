{"designerVersion":"1.2.19","favorite":false,"id":"8f945465-d681-4e2f-94c0-169e1bb3b154","name":"contactoCliente","type":"form","lastUpdate":1481555100824,"rows":[[{"type":"container","dimension":{"xs":12,"sm":12,"md":2,"lg":2},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"repeatedCollection":{"type":"variable"}},"reference":"f36a5fca-3f68-4986-b610-882dd5760eab","rows":[[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"text":{"type":"interpolation","value":""},"alignment":{"type":"constant","value":"left"}},"reference":"2dd63d9d-efc7-41f5-bb31-dc4b07e2461b","id":"pbText"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":"textPanel imagenPanel"},"hidden":{"type":"constant","value":false},"text":{"type":"interpolation","value":"<br><br><em>Recuerda, los campos marcados con asterisco (*) son obligatorios.<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></em>"},"alignment":{"type":"constant","value":"left"}},"reference":"a332e1d0-640f-400f-a055-7841ea9613cb","id":"pbText"}]]},{"type":"formContainer","dimension":{"xs":12,"sm":12,"md":10,"lg":10},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false}},"reference":"196a494c-c5a5-4d86-92a0-4da8b8dbe4bf","container":{"type":"container","dimension":{"xs":12},"propertyValues":{},"reference":"c63d26f4-f0bd-40a3-b451-55064b73988f","rows":[[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"text":{"type":"interpolation","value":""},"alignment":{"type":"constant","value":"left"}},"reference":"3999b930-1c12-4267-bf82-3bffd5ae5a2d","id":"pbText"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":"backgroundTitlle"},"hidden":{"type":"constant","value":false},"text":{"type":"interpolation","value":"CONTACTO CLIENTE"},"level":{"type":"constant","value":"Level 4"},"alignment":{"type":"constant","value":"center"}},"reference":"4c646115-403e-425e-a771-fa97282234f2","id":"pbTitle"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"text":{"type":"interpolation","value":""},"alignment":{"type":"constant","value":"left"}},"reference":"349c6d4a-bb11-4c7d-93c4-ff0763168521","id":"pbText"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"text":{"type":"interpolation","value":"DATOS CLIENTE"},"level":{"type":"constant","value":"Level 5"},"alignment":{"type":"constant","value":"center"}},"reference":"5c8c47d2-18e4-4b4e-bc16-d09468ad2a91","id":"pbTitle"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"text":{"type":"interpolation","value":""},"alignment":{"type":"constant","value":"left"}},"reference":"d557a65a-f350-43ed-9f8b-327ece4d5dc3","id":"pbText"}],[{"type":"fragment","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false}},"reference":"1248b162-d992-4b44-b9ae-1aa80f575a26","id":"43694ce6-7b2a-4366-a8d1-b85a45e0033c","binding":{}}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"text":{"type":"interpolation","value":""},"alignment":{"type":"constant","value":"left"}},"reference":"3d2f4dd6-5272-4b40-9748-0226fb1bb434","id":"pbText"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":6,"lg":6},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"disabled":{"type":"constant","value":false},"required":{"type":"constant","value":true},"labelHidden":{"type":"constant","value":false},"label":{"type":"interpolation","value":"Requiere Referenciación?"},"labelPosition":{"type":"constant","value":"top"},"labelWidth":{"type":"constant","value":4},"placeholder":{"type":"interpolation","value":"Select an option"},"availableValues":{"type":"expression","value":"listaNecesitaReferenciacion"},"displayedKey":{"type":"constant","value":"nombre"},"returnedKey":{"type":"constant"},"value":{"type":"variable","value":"formInput.c_contactoCliente.requiereReferenciacion"}},"reference":"ba142bf5-cb73-42a3-a988-b0ac15894991","id":"pbSelect"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"readOnly":{"type":"constant","value":false},"required":{"type":"constant","value":true},"minLength":{"type":"constant","value":""},"maxLength":{"type":"constant","value":500},"labelHidden":{"type":"constant","value":false},"label":{"type":"interpolation","value":"Observaciones"},"labelPosition":{"type":"constant","value":"top"},"labelWidth":{"type":"constant","value":4},"value":{"type":"variable","value":"formInput.c_contactoCliente.observaciones"}},"reference":"4178940f-be38-4b48-922d-19f39e7b4039","id":"pbTextarea"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":"validator"},"hidden":{"type":"constant","value":false},"text":{"type":"interpolation","value":"Máximo 500 caracteres."},"alignment":{"type":"constant","value":"right"}},"reference":"acc0bff1-7da8-42a9-a2fd-141168e15263","id":"pbText"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":6,"lg":6},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"disabled":{"type":"constant","value":false},"required":{"type":"constant","value":true},"labelHidden":{"type":"constant","value":false},"label":{"type":"interpolation","value":"Próximo Paso"},"labelPosition":{"type":"constant","value":"top"},"labelWidth":{"type":"constant","value":4},"placeholder":{"type":"interpolation","value":"Select an option"},"availableValues":{"type":"expression","value":"listaProximoPaso"},"displayedKey":{"type":"constant","value":"nombre"},"returnedKey":{"type":"constant"},"value":{"type":"variable","value":"formInput.c_contactoCliente.proximoPaso"}},"reference":"c24cd12e-e353-44b7-8939-f431d39ae856","id":"pbSelect"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"text":{"type":"interpolation","value":""},"alignment":{"type":"constant","value":"left"}},"reference":"42bc8105-eda4-46fd-8e1e-8a5dda11ef86","id":"pbText"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":"backgroundTitlleAux"},"hidden":{"type":"expression","value":"!esTipologiaCasuistica"},"text":{"type":"interpolation","value":"Tipologías y Casuísticas"},"level":{"type":"constant","value":"Level 5"},"alignment":{"type":"constant","value":"center"}},"reference":"372edd47-b4fa-4fef-82d6-6a1cffcc5975","id":"pbTitle"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"text":{"type":"interpolation","value":""},"alignment":{"type":"constant","value":"left"}},"reference":"75b8b78d-d09e-4e8b-bb21-ab3871385623","id":"pbText"}],[{"type":"container","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"expression","value":"!esTipologiaCasuistica"},"repeatedCollection":{"type":"variable","value":"formInput.c_contactoCliente.tipologiasCasuisticas"}},"reference":"57c7e373-22fa-4e0a-931d-e5ab7921a997","rows":[[{"type":"fragment","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false}},"reference":"e4f93f01-ec0c-46fd-addc-b13c9aa843ec","id":"6c367304-8194-41e9-9fa3-009542fd8278","binding":{"tipologiaCasuistica":"$item","values":"formInput"}}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"disabled":{"type":"constant","value":false},"label":{"type":"interpolation","value":"x"},"alignment":{"type":"constant","value":"right"},"buttonStyle":{"type":"constant","value":"danger"},"action":{"type":"constant","value":"Remove from collection"},"url":{"type":"interpolation"},"dataToSend":{"type":"constant"},"dataFromSuccess":{"type":"variable"},"dataFromError":{"type":"variable"},"targetUrlOnSuccess":{"type":"interpolation"},"collectionToModify":{"type":"variable","value":"$collection"},"collectionPosition":{"type":"constant","value":"Item"},"valueToAdd":{"type":"constant"},"removeItem":{"type":"variable","value":"$item"}},"reference":"371e981b-b630-4fd3-9280-61e0c28b0f2f","id":"pbButton"}]]}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"expression","value":"!esTipologiaCasuistica"},"disabled":{"type":"constant","value":false},"label":{"type":"interpolation","value":"+"},"alignment":{"type":"constant","value":"right"},"buttonStyle":{"type":"constant","value":"primary"},"action":{"type":"constant","value":"Add to collection"},"url":{"type":"interpolation"},"dataToSend":{"type":"constant"},"dataFromSuccess":{"type":"variable"},"dataFromError":{"type":"variable"},"targetUrlOnSuccess":{"type":"interpolation"},"collectionToModify":{"type":"variable","value":"formInput.c_contactoCliente.tipologiasCasuisticas"},"collectionPosition":{"type":"constant","value":"Last"},"valueToAdd":{"type":"expression","value":"{  \"tipologias\" : {    \"id\" : \"\",    \"nombre\" : \"\"  },  \"casuisticas\" : {    \"id\" : \"\",    \"nombre\" : \"\"  }}"},"removeItem":{"type":"variable"}},"reference":"684eb796-d616-4392-83e0-7ca3d9dd96a9","id":"pbButton"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"text":{"type":"interpolation","value":""},"alignment":{"type":"constant","value":"left"}},"reference":"5a08d470-f0d8-455c-bb34-dd2de2aa300b","id":"pbText"}],[{"type":"component","dimension":{"sm":12,"md":12,"lg":12,"xs":12},"propertyValues":{"removeItem":{"type":"variable"},"alignment":{"type":"constant","value":"center"},"isDisplayed":{"type":"constant","value":true},"targetUrlOnSuccess":{"type":"interpolation","value":"/bonita"},"class":{"type":"constant","value":"org.bonitasoft.web.designer.experimental.parametrizedWidget.ButtonWidget"},"label":{"type":"constant","value":"Enviar"},"collectionPosition":{"type":"constant"},"buttonStyle":{"type":"constant","value":"primary"},"dimension":{"type":"constant","value":12},"valueToAdd":{"type":"expression"},"collectionToModify":{"type":"variable"},"widgetId":{"type":"constant","value":"pbButton"},"labelHidden":{"type":"constant","value":false},"action":{"type":"constant","value":"Submit task"},"dataToSend":{"type":"expression","value":"formInput"},"readonly":{"type":"constant","value":false},"disabled":{"type":"expression","value":"$form.$invalid"},"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"url":{"type":"interpolation"},"dataFromSuccess":{"type":"variable","value":"succes"},"dataFromError":{"type":"variable"}},"reference":"3033a9dd-e01c-4175-8772-afd09427b6e0","id":"pbButton"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":"validator"},"hidden":{"type":"constant","value":false},"text":{"type":"interpolation","value":"{{validador}}"},"level":{"type":"constant","value":"Level 5"},"alignment":{"type":"constant","value":"center"}},"reference":"5788c20a-0c68-4579-ac64-149a5ce83ad8","id":"pbTitle"}]]}}]],"assets":[{"id":"2ecaef68-9002-4ec3-b43a-465c9f49fd49","name":"localization.json","type":"json","order":0,"external":false},{"id":"411d92f5-96d4-485e-abe4-b492656f1978","name":"styleRadicacion.css","type":"css","order":1,"external":false}],"inactiveAssets":[],"data":{"taskId":{"type":"urlparameter","value":"id","exposed":false},"formOutput":{"type":"expression","value":"return {\n\t'c_contactoCliente': $data.formInput.c_contactoCliente\n};","exposed":false},"context":{"type":"url","value":"/bonita/API/bpm/userTask/{{taskId}}/context","exposed":false},"formInput":{"type":"json","value":"{\r\n  \"c_contactoCliente\" : {\r\n    \"requiereReferenciación\" : {\r\n      \"id\" : \"\",\r\n      \"nombre\" : \"\"\r\n    },\r\n    \"proximoPaso\" : {\r\n      \"id\" : \"\",\r\n      \"nombre\" : \"\"\r\n    },\r\n    \"tipologiasCasuisticas\": [\r\n        {\r\n\t\t\t\"tipologias\": {\r\n\t\t\t\t\"id\" : \" \",\r\n\t\t\t\t\"nombre\" : \"\"\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\"casuisticas\": {\r\n\t\t\t\t\"id\" : \" \",\r\n\t\t\t\t\"nombre\" : \"\"\r\n\t\t\t} \r\n        }\r\n\t\t],\r\n    \"observaciones\" : \"\"\r\n  }\r\n}","exposed":false},"succes":{"type":"json","value":"{}","exposed":false},"validador":{"type":"expression","value":"var lista = []\n\ntry{\n    if ($data.formInput.c_contactoCliente.requiereReferenciacion === undefined){\n        lista.push('El campo requiere referenciación?, es obligatorio');\n    }\n}catch(Err){}\n\ntry{\n    if ($data.formInput.c_contactoCliente.observaciones === \"\"){\n        lista.push('El campo observaciones es obligatorio');\n    }\n}catch(Err){}\n\ntry{\n    if ($data.formInput.c_contactoCliente.proximoPaso === undefined){\n        lista.push('El campo próximo paso es obligatorio');\n    }\n}catch(Err){}\n\ntry{\n    //if($data.esTipologiaCasuistica){\n        console.log('Entro');\n        $data.formInput.c_contactoCliente.tipologiasCasuisticas.forEach(function(element, index, array){\n        console.log('Recorrer');\n        if(element.tipologias === undefined || element.casuisticas === undefined){\n            console.log('Agregar');\n            lista.push('Faltan campos por diligenciar en el grupo de tipologías y casuísticas');\n            }\n        } );\n    //}\n}catch(Err){}\n\nreturn lista [0];","exposed":false},"listaTipologia":{"type":"url","value":"../API/extension/ConsultaListasAPI?c=tipologiaContactoCliente","exposed":false},"listaCasuistica":{"type":"url","value":"../API/extension/ConsultaListasAPI?c=casuisticaContactoCliente&p={{formInput.c_contactoCliente.tipologiasCasuisticas.tipologias.id}}","exposed":false},"listaProximoPaso":{"type":"url","value":"../API/extension/ConsultaListasAPI?c=ppContactoCliente","exposed":false},"listaNecesitaReferenciacion":{"type":"url","value":"../API/extension/ConsultaListasAPI?c=necesitaReferenciacion","exposed":false},"esTipologiaCasuistica":{"type":"expression","value":"return $data.formInput.c_contactoCliente.proximoPaso.id !== undefined && \n       $data.formInput.c_contactoCliente.proximoPaso.id === 2;","exposed":false},"observador":{"type":"expression","value":"try{\r\nif($data.formInput.c_contactoCliente.proximoPaso.id === 1){\r\n    $data.formInput.c_contactoCliente.tipologiasCasuisticas = [{tipologias:{id: 0,\r\n\t\t\t\t\t\t\t\t\t\t\t\t                      nombre: \"N/A\"},\r\n\t\t\t\t\t\t\t\t\t\t\t\t            casuisticas:{id:0,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t           nombre: \"N/A\"}}];}\r\n}catch(Err){}","exposed":false}}}