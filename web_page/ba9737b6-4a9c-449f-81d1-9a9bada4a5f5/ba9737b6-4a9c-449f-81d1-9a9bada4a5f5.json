{"designerVersion":"1.2.19","favorite":false,"id":"ba9737b6-4a9c-449f-81d1-9a9bada4a5f5","name":"segmentacion","type":"form","lastUpdate":1480950456421,"rows":[[{"type":"container","dimension":{"xs":12,"sm":12,"md":2,"lg":2},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"repeatedCollection":{"type":"variable"}},"reference":"e6db8926-fc5c-4d59-b963-7973be477731","rows":[[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"text":{"type":"interpolation","value":""},"alignment":{"type":"constant","value":"left"}},"reference":"f86a1bfb-d63b-428c-925a-69e166bba816","id":"pbText"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":"textPanel imagenPanel"},"hidden":{"type":"constant","value":false},"text":{"type":"interpolation","value":"<br><br><em>Recuerda, los campos marcados con asterisco (*) son obligatorios.<br><br><br><br><br><br><br><br><br><br>\n<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>"},"alignment":{"type":"constant","value":"left"}},"reference":"c369c396-6ad0-43dd-8b03-c0ca5ea23daf","id":"pbText"}]]},{"type":"formContainer","dimension":{"xs":12,"sm":12,"md":10,"lg":10},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false}},"reference":"1834fe35-de85-41b4-80dc-54964165830e","container":{"type":"container","dimension":{"xs":12},"propertyValues":{},"reference":"e2fbaec0-33ad-4d10-b84c-c01efff5c5da","rows":[[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"text":{"type":"interpolation","value":""},"alignment":{"type":"constant","value":"left"}},"reference":"882ead23-61d3-4208-a8e3-b1e485add171","id":"pbText"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":"backgroundTitlle"},"hidden":{"type":"constant","value":false},"text":{"type":"interpolation","value":"SEGMENTACIÓN"},"level":{"type":"constant","value":"Level 4"},"alignment":{"type":"constant","value":"center"}},"reference":"b5d14559-a6b0-475e-b74a-6e74f032ba03","id":"pbTitle"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"text":{"type":"interpolation","value":""},"alignment":{"type":"constant","value":"left"}},"reference":"71f8d580-590e-4665-9168-48e369e3e3a3","id":"pbText"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":"textPanel"},"hidden":{"type":"constant","value":false},"text":{"type":"interpolation","value":"DATOS CLIENTE"},"level":{"type":"constant","value":"Level 5"},"alignment":{"type":"constant","value":"center"}},"reference":"52f92f3c-c774-4fea-b9a4-fe47dffe61a2","id":"pbTitle"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"text":{"type":"interpolation","value":""},"alignment":{"type":"constant","value":"left"}},"reference":"7c2350de-0a92-413b-8089-ee1508720dec","id":"pbText"}],[{"type":"fragment","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false}},"reference":"07c46502-5ce1-4ec2-a9c6-dfb2ad9f27cf","id":"43694ce6-7b2a-4366-a8d1-b85a45e0033c","binding":{}}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"text":{"type":"interpolation","value":""},"alignment":{"type":"constant","value":"left"}},"reference":"4c130a5d-6978-4d4e-9e06-de7df981534f","id":"pbText"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":4,"lg":4},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"type":{"type":"constant","value":"number"},"name":{"type":"constant","value":"codigoOficina"},"label":{"type":"constant","value":"Oficina Segementación"},"disabled":{"type":"constant"},"max":{"type":"constant","value":4},"min":{"type":"constant"},"maxlength":{"type":"constant","value":4},"minlength":{"type":"constant"},"pattern":{"type":"constant"},"readonly":{"type":"constant"},"required":{"type":"constant","value":true},"value":{"type":"variable","value":"formInput.c_segmentacion.oficinaSegmentacion"},"placeholder":{"type":"constant","value":"4 digitos"}},"reference":"1b3290f1-5ae3-4f97-bdbd-378d671e93ba","id":"customInput"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":3,"lg":3},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"required":{"type":"constant","value":false},"minLength":{"type":"constant","value":""},"maxLength":{"type":"constant","value":""},"readOnly":{"type":"constant","value":true},"labelHidden":{"type":"constant","value":false},"label":{"type":"interpolation","value":"Nombre Oficina"},"labelPosition":{"type":"constant","value":"top"},"labelWidth":{"type":"constant","value":4},"placeholder":{"type":"interpolation"},"value":{"type":"variable","value":"listaOficinaCiudadTerrirtorial.nombreO"},"type":{"type":"constant","value":"text"},"min":{"type":"constant"},"max":{"type":"constant"}},"reference":"f8b5f4bb-a60b-400f-a11b-5a505066cfd5","id":"pbInput"},{"type":"component","dimension":{"xs":12,"sm":12,"md":3,"lg":3},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"required":{"type":"constant","value":false},"minLength":{"type":"constant","value":""},"maxLength":{"type":"constant","value":""},"readOnly":{"type":"constant","value":true},"labelHidden":{"type":"constant","value":false},"label":{"type":"interpolation","value":"Ciudad Oficina"},"labelPosition":{"type":"constant","value":"top"},"labelWidth":{"type":"constant","value":4},"placeholder":{"type":"interpolation"},"value":{"type":"variable","value":"listaOficinaCiudadTerrirtorial.nombreC"},"type":{"type":"constant","value":"text"},"min":{"type":"constant"},"max":{"type":"constant"}},"reference":"10b7a3e1-2ee8-41c2-ab89-209f2e6ee9d9","id":"pbInput"},{"type":"component","dimension":{"xs":12,"sm":12,"md":3,"lg":3},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"required":{"type":"constant","value":false},"minLength":{"type":"constant","value":""},"maxLength":{"type":"constant","value":""},"readOnly":{"type":"constant","value":true},"labelHidden":{"type":"constant","value":false},"label":{"type":"interpolation","value":"Territorial Oficina"},"labelPosition":{"type":"constant","value":"top"},"labelWidth":{"type":"constant","value":4},"placeholder":{"type":"interpolation"},"value":{"type":"variable","value":"listaOficinaCiudadTerrirtorial.nombreT"},"type":{"type":"constant","value":"text"},"min":{"type":"constant"},"max":{"type":"constant"}},"reference":"36f28019-c627-40e0-b726-be02e900c4d9","id":"pbInput"},{"type":"component","dimension":{"xs":12,"sm":12,"md":3,"lg":3},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"required":{"type":"constant","value":false},"minLength":{"type":"constant","value":""},"maxLength":{"type":"constant","value":""},"readOnly":{"type":"constant","value":true},"labelHidden":{"type":"constant","value":false},"label":{"type":"interpolation","value":"Zona Oficina"},"labelPosition":{"type":"constant","value":"top"},"labelWidth":{"type":"constant","value":4},"placeholder":{"type":"interpolation"},"value":{"type":"variable","value":"listaOficinaCiudadTerrirtorial.nombreZ"},"type":{"type":"constant","value":"text"},"min":{"type":"constant"},"max":{"type":"constant"}},"reference":"3fcf48c2-da19-4d2f-8385-81e00e66d39b","id":"pbInput"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"readOnly":{"type":"constant","value":false},"required":{"type":"constant","value":true},"minLength":{"type":"constant","value":""},"maxLength":{"type":"constant","value":500},"labelHidden":{"type":"constant","value":false},"label":{"type":"interpolation","value":"Observaciones"},"labelPosition":{"type":"constant","value":"top"},"labelWidth":{"type":"constant","value":4},"value":{"type":"variable","value":"formInput.c_segmentacion.observaciones"}},"reference":"8ebdab4a-e7e2-43b5-83b5-21ac591f1ab7","id":"pbTextarea"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":"validator"},"hidden":{"type":"constant","value":false},"text":{"type":"interpolation","value":"Máximo 500 caracteres."},"alignment":{"type":"constant","value":"right"}},"reference":"d4f9d7ff-846d-4ef7-bdc1-ac40bafc39be","id":"pbText"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":6,"lg":6},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"disabled":{"type":"constant","value":false},"required":{"type":"constant","value":true},"labelHidden":{"type":"constant","value":false},"label":{"type":"interpolation","value":"Próximo Paso"},"labelPosition":{"type":"constant","value":"top"},"labelWidth":{"type":"constant","value":4},"placeholder":{"type":"interpolation","value":"Select an option"},"availableValues":{"type":"expression","value":"listaProximoPaso"},"displayedKey":{"type":"constant","value":"nombre"},"returnedKey":{"type":"constant"},"value":{"type":"variable","value":"formInput.c_segmentacion.proximoPaso"}},"reference":"69901d45-faca-4fe6-813f-847e63f5954a","id":"pbSelect"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"text":{"type":"interpolation","value":""},"alignment":{"type":"constant","value":"left"}},"reference":"eab2f4e8-3beb-4fc4-b44b-9d9378124af2","id":"pbText"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":"backgroundTitlleAux"},"hidden":{"type":"expression","value":"!esTipologiaCasuistica"},"text":{"type":"interpolation","value":"Tipologías y Casuísticas"},"level":{"type":"constant","value":"Level 5"},"alignment":{"type":"constant","value":"center"}},"reference":"e3083c7f-d0e1-46f5-a892-d4f17ac275aa","id":"pbTitle"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"text":{"type":"interpolation","value":""},"alignment":{"type":"constant","value":"left"}},"reference":"93bbe429-ff01-493f-8065-b2740f2aeae2","id":"pbText"}],[{"type":"container","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"expression","value":"!esTipologiaCasuistica"},"repeatedCollection":{"type":"variable","value":"formInput.c_segmentacion.tipologiasCasuisticas"}},"reference":"fbd56f6c-8fee-494f-8b11-51ac25278e7c","rows":[[{"type":"fragment","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false}},"reference":"a61c9b6e-7e00-4de0-88e2-9107839943b5","id":"27362f6e-c24e-4dcb-9123-16eef9af92a4","binding":{"tipologiaCasuistica":"$item","values":"formInput"}}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"disabled":{"type":"constant","value":false},"label":{"type":"interpolation","value":"x"},"alignment":{"type":"constant","value":"right"},"buttonStyle":{"type":"constant","value":"danger"},"action":{"type":"constant","value":"Remove from collection"},"url":{"type":"interpolation"},"dataToSend":{"type":"constant"},"dataFromSuccess":{"type":"variable"},"dataFromError":{"type":"variable"},"targetUrlOnSuccess":{"type":"interpolation"},"collectionToModify":{"type":"variable","value":"$collection"},"collectionPosition":{"type":"constant","value":"Item"},"valueToAdd":{"type":"constant"},"removeItem":{"type":"variable","value":"$item"}},"reference":"d06fbf8f-d474-40f9-90ca-a575ad8410f9","id":"pbButton"}]]}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"expression","value":"!esTipologiaCasuistica"},"disabled":{"type":"constant","value":false},"label":{"type":"interpolation","value":"+"},"alignment":{"type":"constant","value":"right"},"buttonStyle":{"type":"constant","value":"primary"},"action":{"type":"constant","value":"Add to collection"},"url":{"type":"interpolation"},"dataToSend":{"type":"constant"},"dataFromSuccess":{"type":"variable"},"dataFromError":{"type":"variable"},"targetUrlOnSuccess":{"type":"interpolation"},"collectionToModify":{"type":"variable","value":"formInput.c_segmentacion.tipologiasCasuisticas"},"collectionPosition":{"type":"constant","value":"Last"},"valueToAdd":{"type":"expression","value":"{  \"tipologias\" : {    \"id\" : \"\",    \"nombre\" : \"\"  },  \"casuisticas\" : {    \"id\" : \"\",    \"nombre\" : \"\"  }}"},"removeItem":{"type":"variable"}},"reference":"ef792407-8e6c-419a-b3b0-e482694ab339","id":"pbButton"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"text":{"type":"interpolation","value":""},"alignment":{"type":"constant","value":"left"}},"reference":"73f6dcb9-03a9-4948-a450-3225401d968a","id":"pbText"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":false},"disabled":{"type":"expression","value":"$form.$invalid"},"label":{"type":"interpolation","value":"Enviar"},"alignment":{"type":"constant","value":"center"},"buttonStyle":{"type":"constant","value":"primary"},"action":{"type":"constant","value":"Submit task"},"url":{"type":"interpolation"},"dataToSend":{"type":"expression","value":"formInput"},"dataFromSuccess":{"type":"variable","value":"succes"},"dataFromError":{"type":"variable"},"targetUrlOnSuccess":{"type":"interpolation","value":"/bonita"},"collectionToModify":{"type":"variable"},"collectionPosition":{"type":"constant","value":"Last"},"valueToAdd":{"type":"constant"},"removeItem":{"type":"variable"}},"reference":"b300a314-2064-4160-9c16-c0130d5d0d4c","id":"pbButton"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":"validator"},"hidden":{"type":"constant","value":false},"text":{"type":"interpolation","value":"{{validador}}"},"level":{"type":"constant","value":"Level 5"},"alignment":{"type":"constant","value":"center"}},"reference":"c37ddbec-67dc-4446-8946-04e70207bd97","id":"pbTitle"}],[{"type":"component","dimension":{"xs":12,"sm":12,"md":12,"lg":12},"propertyValues":{"cssClasses":{"type":"constant","value":""},"hidden":{"type":"constant","value":true},"text":{"type":"interpolation","value":"<pre>formInput:{{formInput|json}}</pre>"},"alignment":{"type":"constant","value":"left"}},"reference":"d5e2e928-08c0-4bf5-a677-e03b9fba8c9d","id":"pbText"}]]}}]],"assets":[{"id":"2fe225b9-45d6-4cea-b4f4-7e754271c2a3","name":"styleRadicacion.css","type":"css","order":1,"external":false},{"id":"f3216a30-7174-40ee-b3b1-d1b05c932ba7","name":"localization.json","type":"json","order":0,"external":false}],"inactiveAssets":[],"data":{"taskId":{"type":"urlparameter","value":"id","exposed":false},"succes":{"type":"json","value":"{}","exposed":false},"context":{"type":"url","value":"/bonita/API/bpm/userTask/{{taskId}}/context","exposed":false},"formInput":{"type":"json","value":"{\r\n  \"c_segmentacion\" : {\r\n    \"oficinaSegmentacion\":\"\",\r\n    \"proximoPaso\" : {\r\n      \"id\" : \"\",\r\n      \"nombre\" : \"\"\r\n    },\r\n    \"tipologiasCasuisticas\": [\r\n        {\r\n\t\t\t\"tipologias\": {\r\n\t\t\t\t\"id\" : \" \",\r\n\t\t\t\t\"nombre\" : \"\"\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\"casuisticas\": {\r\n\t\t\t\t\"id\" : \" \",\r\n\t\t\t\t\"nombre\" : \"\"\r\n\t\t\t} \r\n        }\r\n\t\t],\r\n    \"observaciones\" : \"\"\r\n  }\r\n}","exposed":false},"formOutput":{"type":"expression","value":"return {\n\t'c_segmentacion': $data.formInput.c_segmentacion\n};","exposed":false},"listaTipologia":{"type":"url","value":"../API/extension/ConsultaListasAPI?c=tipologiaSegmentacion","exposed":false},"listaCasuistica":{"type":"url","value":"../API/extension/ConsultaListasAPI?c=casuisticaSegmentacion&p={{formInput.c_segmentacion.tipologiasCasuisticas.tipologias.id}}","exposed":false},"listaProximoPaso":{"type":"url","value":"../API/extension/ConsultaListasAPI?c=ppSegmentacion","exposed":false},"validador":{"type":"expression","value":"var lista = []\n\ntry{\n    if ($data.formInput.c_segmentacion.observaciones === \"\"){\n        lista.push('El campo observaciones es obligatorio');\n    }\n}catch(Err){}\n\ntry{\n    if ($data.formInput.c_segmentacion.proximoPaso === undefined){\n        lista.push('El campo próximo paso es obligatorio');\n    }\n}catch(Err){}\n\ntry{\n    if($data.esTipologiaCasuistica){\n        console.log('Entro');\n        $data.formInput.c_segmentacion.tipologiasCasuisticas.forEach(function(element, index, array){\n        console.log('Recorrer');\n        if(element.tipologias === undefined || element.casuisticas === undefined){\n            console.log('Agregar');\n            lista.push('Faltan campos por diligenciar en el grupo de tipologías y casuísticas');\n            }\n        } );\n    }\n}catch(Err){}\n\nreturn lista [0];","exposed":false},"esTipologiaCasuistica":{"type":"expression","value":"return $data.formInput.c_segmentacion.proximoPaso.id !== undefined && \n       $data.formInput.c_segmentacion.proximoPaso.id === 2;","exposed":false},"observador":{"type":"expression","value":"try{\nif($data.formInput.c_segmentacion.proximoPaso.id === 1){\n    $data.formInput.c_segmentacion.tipologiasCasuisticas = [{tipologias:{id: 0,\n\t\t\t\t\t\t\t\t\t\t\t\t                      nombre: \"N/A\"},\n\t\t\t\t\t\t\t\t\t\t\t\t            casuisticas:{id:0,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t           nombre: \"N/A\"}}];}\n}catch(Err){}","exposed":false},"listaOficinaCiudadTerrirtorial":{"type":"url","value":"../API/extension/ConsultaListasAPI?c=oficinaCiudadTerrirtorial&p={{formInput.c_segmentacion.oficinaSegmentacion}}","exposed":false}}}