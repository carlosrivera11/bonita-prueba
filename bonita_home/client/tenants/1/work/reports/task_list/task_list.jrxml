<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="task_list" language="groovy" pageWidth="1250" pageHeight="994" orientation="Landscape" whenNoDataType="AllSectionsNoDetail" columnWidth="1210" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" isSummaryWithPageHeaderAndFooter="true" resourceBundle="task_list" uuid="bcc890e8-4d90-4dad-9b0a-5a032852bfb5">
	<property name="ireport.zoom" value="3.1329361270617477"/>
	<property name="ireport.x" value="38"/>
	<property name="ireport.y" value="550"/>
	<property name="ireport.callouts" value="##Mon Apr 15 18:53:57 CEST 2013\ncallouts.1.pins=828,169;\ncallouts.1.text=Print the parameters when export to PDF\ncallouts.1.bounds=1069,59,150,77"/>
	<property name="BONITA_HTML_ENGINE" value="true"/>
	<property name="BONITA_FORM_1_ID" value="p_date"/>
	<property name="BONITA_FORM_1_WIDGET" value="DATE_RANGE"/>
	<property name="BONITA_FORM_1_LABEL" value="Period"/>
	<property name="BONITA_FORM_2_ID" value="p_state_name"/>
	<property name="BONITA_FORM_2_WIDGET" value="SELECT"/>
	<property name="BONITA_FORM_2_LABEL" value="State"/>
	<property name="BONITA_FORM_2_AVAILABLE_VALUES" value="[{&quot;id&quot;:&quot;completed&quot;,&quot;label&quot;:&quot;Archived&quot;},{&quot;id&quot;:&quot;failed&quot;,&quot;label&quot;:&quot;Failed&quot;},{&quot;id&quot;:&quot;ready&quot;,&quot;label&quot;:&quot;Opened&quot;}]"/>
	<property name="BONITA_FORM_2_HAS_ALL" value="TRUE"/>
	<property name="BONITA_FORM_2_HAS_ALL_VALUE" value="%"/>
	<property name="BONITA_FORM_3_ID" value="p_apps_id"/>
	<property name="BONITA_FORM_3_WIDGET" value="SELECT"/>
	<property name="BONITA_FORM_3_LABEL" value="Apps"/>
	<property name="BONITA_FORM_3_QUERY" value="SELECT PROCESSID AS id, NAME AS label  FROM process_definition WHERE TENANTID = $P{BONITA_TENANT_ID} ORDER BY label, id"/>
	<property name="BONITA_FORM_3_HAS_ALL" value="TRUE"/>
	<property name="BONITA_FORM_3_HAS_ALL_VALUE" value="-1"/>
	<import value="org.bonitasoft.report.chart.customizer.BonitaBarChartCustomizer"/>
	<import value="java.lang.Math"/>
	<template><![CDATA[$P{BONITA_REPORT_FOLDER} + "/bonita_report_style_"+ $P{BONITA_EXPORT_FORMAT}+ $P{BONITA_LOCALE_LANGUAGE}+ ".jrtx"]]></template>
	<subDataset name="task_list" uuid="8037893a-7465-44fd-8a9f-c88c84551a49">
		<parameter name="BONITA_TENANT_ID" class="java.lang.Long">
			<defaultValueExpression><![CDATA[]]></defaultValueExpression>
		</parameter>
		<parameter name="BONITA_LOGGED_USER_ID" class="java.lang.String"/>
		<parameter name="BONITA_BASE_URL" class="java.lang.String"/>
		<parameter name="BONITA_REPORT_FOLDER" class="java.lang.String"/>
		<parameter name="BONITA_HTML_MAX_REPORT_COUNT" class="java.lang.Long" isForPrompting="false"/>
		<parameter name="BONITA_EXPORT_FORMAT" class="java.lang.String">
			<defaultValueExpression><![CDATA["HTML"]]></defaultValueExpression>
		</parameter>
		<parameter name="BONITA_TIME_ZONE" class="java.util.TimeZone" isForPrompting="false">
			<defaultValueExpression><![CDATA[java.util.TimeZone.getDefault()]]></defaultValueExpression>
		</parameter>
		<parameter name="BONITA_LOCALE_DATE_FORMAT" class="java.lang.String"/>
		<parameter name="BONITA_LOCALE_TIME_FORMAT" class="java.lang.String"/>
		<parameter name="BONITA_LOCALE_DATETIME_FORMAT" class="java.lang.String"/>
		<parameter name="p_date_from" class="java.util.Date">
			<defaultValueExpression><![CDATA[]]></defaultValueExpression>
		</parameter>
		<parameter name="p_date_to" class="java.util.Date">
			<defaultValueExpression><![CDATA[]]></defaultValueExpression>
		</parameter>
		<parameter name="p_state_name" class="java.lang.String">
			<defaultValueExpression><![CDATA[]]></defaultValueExpression>
		</parameter>
		<parameter name="p_apps_id" class="java.lang.Long">
			<defaultValueExpression><![CDATA[]]></defaultValueExpression>
		</parameter>
		<parameter name="p_period_duration" class="java.lang.Long" isForPrompting="false">
			<defaultValueExpression><![CDATA[(
    (org.joda.time.Hours.hoursBetween(new org.joda.time.DateTime($P{p_date_from}.getTime()), new org.joda.time.DateTime($P{p_date_to}.getTime()))).getHours()  > 24 ?
    new Long(1000 * 60 * 60 * 24)
    :
    new Long(1000 * 60 * 60)
)]]></defaultValueExpression>
		</parameter>
		<parameter name="_p_apps_id" class="java.lang.String" isForPrompting="false">
			<defaultValueExpression><![CDATA[($P{p_apps_id} != null && !"-1".equals($P{p_apps_id} )) ?
    " AND APS.PROCESSID = " + $P{p_apps_id} + " "
    : ""]]></defaultValueExpression>
		</parameter>
		<parameter name="_p_date_from" class="java.lang.Long" isForPrompting="false">
			<defaultValueExpression><![CDATA[$P{p_date_from}.getTime()]]></defaultValueExpression>
		</parameter>
		<parameter name="_p_date_to" class="java.lang.Long" isForPrompting="false">
			<defaultValueExpression><![CDATA[$P{p_date_to}.getTime()]]></defaultValueExpression>
		</parameter>
		<parameter name="_query_limit" class="java.lang.String"/>
		<parameter name="_p_state_name" class="java.lang.String" isForPrompting="false">
			<defaultValueExpression><![CDATA[($P{p_state_name} != null && !"%".equals($P{p_state_name})) ?
				(("completed".equals($P{p_state_name})) ? " AND (TSK.STATENAME = 'completed' OR TSK.STATENAME = 'aborted') " : " AND TSK.STATENAME = '" + $P{p_state_name} + "' ") :
				" AND TSK.KIND in ('manual','user') "]]></defaultValueExpression>
		</parameter>
		<queryString language="BONITASQL">
			<![CDATA[SELECT
	TSK.ID AS TSK_FLOW_NODE_DEFINITION_ID,
	TSK.DISPLAYNAME AS TSK_DISPLAY_NAME,
	TSK.STATENAME AS TSK_STATE_NAME,
	TSK.REACHEDSTATEDATE AS TSK_REACHED_STATE_DATE,
	CS.ID AS CS_ID,
	0 AS CS_ARCHIVED_ID,
	'OPEN' as CS_STATE_NAME,
	APS.PROCESSID AS APS_PROCESS_ID,
	APS.NAME AS APS_NAME,
	USR.FIRSTNAME AS USR_FIRSTNAME,
	USR.LASTNAME AS USR_LASTNAME
FROM flownode_instance TSK
INNER JOIN process_instance CS ON TSK.ROOTCONTAINERID = CS.ID
INNER JOIN process_definition APS ON CS.PROCESSDEFINITIONID = APS.PROCESSID
LEFT OUTER JOIN user_ USR ON (TSK.ASSIGNEEID = USR.ID AND USR.TENANTID = $P{BONITA_TENANT_ID})
WHERE TSK.TENANTID = $P{BONITA_TENANT_ID}
AND TSK.KIND in ('manual','user')
AND CS.TENANTID = $P{BONITA_TENANT_ID}
AND APS.TENANTID = $P{BONITA_TENANT_ID}
$P!{_p_state_name}
AND TSK.REACHEDSTATEDATE BETWEEN $P{_p_date_from} AND $P{_p_date_to}
$P!{_p_apps_id}
UNION
SELECT
	TSK.ID AS TSK_FLOW_NODE_DEFINITION_ID,
	TSK.DISPLAYNAME AS TSK_DISPLAY_NAME,
	(CASE
         WHEN TSK.STATENAME = 'aborted'
             THEN  'completed'
             ELSE TSK.STATENAME
    END) AS TSK_STATE_NAME,
	TSK.REACHEDSTATEDATE AS TSK_REACHED_STATE_DATE,
	CS.ID AS CS_ID,
	0 AS CS_ARCHIVED_ID,
	'OPEN' as CS_STATE_NAME,
	APS.PROCESSID AS APS_PROCESS_ID,
	APS.NAME AS APS_NAME,
	USR.FIRSTNAME AS USR_FIRSTNAME,
	USR.LASTNAME AS USR_LASTNAM
FROM arch_flownode_instance TSK
INNER JOIN process_instance  CS ON TSK.ROOTCONTAINERID = CS.ID
INNER JOIN process_definition APS ON CS.PROCESSDEFINITIONID = APS.PROCESSID
LEFT OUTER JOIN user_ USR ON (TSK.ASSIGNEEID = USR.ID AND USR.TENANTID = $P{BONITA_TENANT_ID})
WHERE TSK.KIND in ('manual','user')
AND TSK.STATEID in (2,16)
AND TSK.TENANTID = $P{BONITA_TENANT_ID}
AND CS.TENANTID = $P{BONITA_TENANT_ID}
AND APS.TENANTID = $P{BONITA_TENANT_ID}
$P!{_p_state_name}
AND TSK.REACHEDSTATEDATE BETWEEN $P{_p_date_from} AND $P{_p_date_to}
$P!{_p_apps_id}
UNION
SELECT
	TSK.ID AS TSK_FLOW_NODE_DEFINITION_ID,
	TSK.DISPLAYNAME AS TSK_DISPLAY_NAME,
	(CASE
         WHEN TSK.STATENAME = 'aborted'
             THEN  'completed'
             ELSE TSK.STATENAME
    END) AS TSK_STATE_NAME,
	TSK.REACHEDSTATEDATE AS TSK_REACHED_STATE_DATE,
	CS.SOURCEOBJECTID AS CS_ID,
	CS.ID AS CS_ARCHIVED_ID,
	'ARCHIVED' as CS_STATE_NAME,
	APS.PROCESSID AS APS_PROCESS_ID,
	APS.NAME AS APS_NAME,
	USR.FIRSTNAME AS USR_FIRSTNAME,
	USR.LASTNAME AS USR_LASTNAM
FROM arch_flownode_instance TSK
INNER JOIN arch_process_instance CS ON TSK.ROOTCONTAINERID = CS.SOURCEOBJECTID
INNER JOIN process_definition APS ON CS.PROCESSDEFINITIONID = APS.PROCESSID
LEFT OUTER JOIN user_ USR ON (TSK.ASSIGNEEID = USR.ID AND USR.TENANTID = $P{BONITA_TENANT_ID})
WHERE TSK.KIND in ('manual','user')
AND TSK.STATEID in (2,16)
AND TSK.TENANTID = $P{BONITA_TENANT_ID}
AND CS.STATEID in (3,4,6)
AND CS.TENANTID = $P{BONITA_TENANT_ID}
AND APS.TENANTID = $P{BONITA_TENANT_ID}
$P!{_p_state_name}
AND TSK.REACHEDSTATEDATE BETWEEN $P{_p_date_from} AND $P{_p_date_to}
$P!{_p_apps_id}]]>
		</queryString>
		<field name="TSK_FLOW_NODE_DEFINITION_ID" class="java.lang.Long"/>
		<field name="TSK_DISPLAY_NAME" class="java.lang.String"/>
		<field name="TSK_STATE_NAME" class="java.lang.String"/>
		<field name="TSK_REACHED_STATE_DATE" class="java.lang.Long"/>
		<field name="CS_ID" class="java.lang.Long"/>
		<field name="CS_ARCHIVED_ID" class="java.lang.Long"/>
		<field name="CS_STATE_NAME" class="java.lang.String"/>
		<field name="APS_PROCESS_ID" class="java.lang.Long"/>
		<field name="APS_NAME" class="java.lang.String"/>
		<field name="USR_FIRSTNAME" class="java.lang.String"/>
		<field name="USR_LASTNAME" class="java.lang.String"/>
		<sortField name="sortable" type="Variable"/>
		<variable name="dateformat" class="java.text.SimpleDateFormat">
			<variableExpression><![CDATA[new SimpleDateFormat($P{BONITA_LOCALE_DATE_FORMAT}, $P{REPORT_LOCALE})]]></variableExpression>
			<initialValueExpression><![CDATA[new SimpleDateFormat($P{BONITA_LOCALE_DATE_FORMAT}, $P{REPORT_LOCALE})]]></initialValueExpression>
		</variable>
		<variable name="dateTimeformat" class="java.text.SimpleDateFormat">
			<variableExpression><![CDATA[new SimpleDateFormat($P{BONITA_LOCALE_DATETIME_FORMAT}, $P{REPORT_LOCALE})]]></variableExpression>
			<initialValueExpression><![CDATA[new SimpleDateFormat($P{BONITA_LOCALE_DATETIME_FORMAT}, $P{REPORT_LOCALE})]]></initialValueExpression>
		</variable>
		<variable name="timeFormat" class="java.text.SimpleDateFormat">
			<variableExpression><![CDATA[new SimpleDateFormat($P{BONITA_LOCALE_TIME_FORMAT}, $P{REPORT_LOCALE})]]></variableExpression>
			<initialValueExpression><![CDATA[new SimpleDateFormat($P{BONITA_LOCALE_TIME_FORMAT}, $P{REPORT_LOCALE})]]></initialValueExpression>
		</variable>
		<variable name="sortable" class="java.lang.Long">
			<variableExpression><![CDATA[Math.abs((org.joda.time.Minutes.minutesBetween(

    new org.joda.time.DateTime($F{TSK_REACHED_STATE_DATE}),
    new org.joda.time.DateTime()
   )).getMinutes() )]]></variableExpression>
		</variable>
	</subDataset>
	<subDataset name="AppsName" uuid="dae07375-7044-4531-915f-7c374fc4baec">
		<parameter name="BONITA_TENANT_ID" class="java.lang.Long">
			<defaultValueExpression><![CDATA[]]></defaultValueExpression>
		</parameter>
		<parameter name="BONITA_LOGGED_USER_ID" class="java.lang.String"/>
		<parameter name="BONITA_REPORT_URL" class="java.lang.String"/>
		<parameter name="BONITA_REPORT_FOLDER" class="java.lang.String">
			<defaultValueExpression><![CDATA[]]></defaultValueExpression>
		</parameter>
		<parameter name="BONITA_BASE_URL" class="java.lang.String"/>
		<parameter name="BONITA_HTML_MAX_REPORT_COUNT" class="java.lang.Integer" isForPrompting="false"/>
		<parameter name="BONITA_EXPORT_FORMAT" class="java.lang.String">
			<defaultValueExpression><![CDATA["HTML"]]></defaultValueExpression>
		</parameter>
		<parameter name="BONITA_TIME_ZONE" class="java.util.TimeZone" isForPrompting="false">
			<defaultValueExpression><![CDATA[java.util.TimeZone.getDefault()]]></defaultValueExpression>
		</parameter>
		<parameter name="BONITA_LOCALE_DATETIME_FORMAT" class="java.lang.String"/>
		<parameter name="BONITA_LOCALE_DATE_FORMAT" class="java.lang.String"/>
		<parameter name="BONITA_LOCALE_TIME_FORMAT" class="java.lang.String"/>
		<parameter name="BONITA_EXPORT_TO_PDF" class="java.lang.String"/>
		<parameter name="p_period_duration" class="java.lang.Long" isForPrompting="false">
			<defaultValueExpression><![CDATA[(
    (org.joda.time.Hours.hoursBetween(new org.joda.time.DateTime($P{p_date_from}.getTime()), new org.joda.time.DateTime($P{p_date_to}.getTime()))).getHours()  > 24 ?
    new Long(1000 * 60 * 60 *24)
    :
    new Long(1000 * 60 * 60 )
)]]></defaultValueExpression>
		</parameter>
		<parameter name="BONITA_HTML_FORM" class="java.lang.String">
			<defaultValueExpression><![CDATA["<select name='date_range'>"
+"	<option value='today'>today</option>"
+"	<option value='yesterday'>yesterday</option>"
+"	<option value='last_7_days'>last 7 days</option>"
+"	<option value='last_30_days'>last 30 days</option>"
+"</select>"]]></defaultValueExpression>
		</parameter>
		<parameter name="p_period_duration_plus" class="java.lang.Long" isForPrompting="false">
			<defaultValueExpression><![CDATA[(
    (org.joda.time.Hours.hoursBetween(new org.joda.time.DateTime($P{p_date_from}.getTime()), new org.joda.time.DateTime($P{p_date_to}.getTime()))).getHours()  > 24 ?
    new Long((23*60*60*1000) + (59*60*1000) + (57*1000) - ($P{BONITA_TIME_ZONE}.getRawOffset() + $P{BONITA_TIME_ZONE}.getDSTSavings()))
    :
    new Long((59*60*1000) + (57*1000) )
)]]></defaultValueExpression>
		</parameter>
		<parameter name="p_state_name" class="java.lang.String">
			<defaultValueExpression><![CDATA["%"]]></defaultValueExpression>
		</parameter>
		<parameter name="p_apps_id" class="java.lang.String">
			<defaultValueExpression><![CDATA[]]></defaultValueExpression>
		</parameter>
		<parameter name="p_date_from" class="java.util.Date">
			<defaultValueExpression><![CDATA[]]></defaultValueExpression>
		</parameter>
		<parameter name="p_date_to" class="java.util.Date">
			<defaultValueExpression><![CDATA[]]></defaultValueExpression>
		</parameter>
		<parameter name="_p_date_from" class="java.lang.Long" isForPrompting="false">
			<defaultValueExpression><![CDATA[$P{p_date_from}.getTime()]]></defaultValueExpression>
		</parameter>
		<parameter name="_p_date_to" class="java.lang.Long" isForPrompting="false">
			<defaultValueExpression><![CDATA[$P{p_date_to}.getTime()]]></defaultValueExpression>
		</parameter>
		<parameter name="_p_apps_id" class="java.lang.String" isForPrompting="false">
			<defaultValueExpression><![CDATA[($P{p_apps_id} != null && !"-1".equals($P{p_apps_id} )) ?
    " AND APS.PROCESSID = " + $P{p_apps_id} + " "
    : ""]]></defaultValueExpression>
		</parameter>
		<parameter name="_p_state_name" class="java.lang.String" isForPrompting="false">
			<defaultValueExpression><![CDATA[($P{p_state_name} != null && !"%".equals($P{p_state_name})) ?
				(("completed".equals($P{p_state_name})) ? " AND (TSK.STATENAME = 'completed' OR TSK.STATENAME = 'aborted') " : " AND TSK.STATENAME = '" + $P{p_state_name} + "' ") :
				" AND TSK.KIND in ('manual','user') "]]></defaultValueExpression>
		</parameter>
		<queryString language="BONITASQL">
			<![CDATA[SELECT
	APS.PROCESSID AS APS_PROCESS_ID,
	APS.NAME AS APS_NAME
FROM process_definition APS
WHERE APS.PROCESSID = $P{p_apps_id}]]>
		</queryString>
		<field name="APS_PROCESS_ID" class="java.lang.Long"/>
		<field name="APS_NAME" class="java.lang.String"/>
	</subDataset>
	<parameter name="BONITA_TENANT_ID" class="java.lang.Long">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="BONITA_LOGGED_USER_ID" class="java.lang.String"/>
	<parameter name="BONITA_BASE_URL" class="java.lang.String"/>
	<parameter name="BONITA_REPORT_URL" class="java.lang.String"/>
	<parameter name="BONITA_REPORT_FOLDER" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="BONITA_HTML_FORM" class="java.lang.String">
		<defaultValueExpression><![CDATA["<select name='date_range'>"
+"	<option value='today'>today</option>"
+"	<option value='yesterday'>yesterday</option>"
+"	<option value='last_7_days'>last 7 days</option>"
+"	<option value='last_30_days'>last 30 days</option>"
+"</select>"]]></defaultValueExpression>
	</parameter>
	<parameter name="BONITA_HTML_MAX_REPORT_COUNT" class="java.lang.Integer" isForPrompting="false"/>
	<parameter name="BONITA_EXPORT_FORMAT" class="java.lang.String">
		<defaultValueExpression><![CDATA["HTML"]]></defaultValueExpression>
	</parameter>
	<parameter name="BONITA_EXPORT_TO_PDF" class="java.lang.String"/>
	<parameter name="BONITA_TIME_ZONE" class="java.util.TimeZone" isForPrompting="false">
		<defaultValueExpression><![CDATA[java.util.TimeZone.getDefault()]]></defaultValueExpression>
	</parameter>
	<parameter name="BONITA_LOCALE_DATE_FORMAT" class="java.lang.String"/>
	<parameter name="BONITA_LOCALE_TIME_FORMAT" class="java.lang.String"/>
	<parameter name="BONITA_LOCALE_DATETIME_FORMAT" class="java.lang.String"/>
	<parameter name="p_date_from" class="java.util.Date">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="p_date_to" class="java.util.Date">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="p_state_name" class="java.lang.String">
		<defaultValueExpression><![CDATA["%"]]></defaultValueExpression>
	</parameter>
	<parameter name="p_apps_id" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="p_period_duration" class="java.lang.Long" isForPrompting="false">
		<defaultValueExpression><![CDATA[(
    (org.joda.time.Hours.hoursBetween(new org.joda.time.DateTime($P{p_date_from}.getTime()), new org.joda.time.DateTime($P{p_date_to}.getTime()))).getHours()  > 24 ?
    new Long(1000 * 60 * 60 *24)
    :
    new Long(1000 * 60 * 60 )
)]]></defaultValueExpression>
	</parameter>
	<parameter name="p_period_duration_plus" class="java.lang.Long" isForPrompting="false">
		<defaultValueExpression><![CDATA[(
    (org.joda.time.Hours.hoursBetween(new org.joda.time.DateTime($P{p_date_from}.getTime()), new org.joda.time.DateTime($P{p_date_to}.getTime()))).getHours()  > 24 ?
    new Long((23*60*60*1000) + (59*60*1000) + (57*1000) - ($P{BONITA_TIME_ZONE}.getRawOffset() + $P{BONITA_TIME_ZONE}.getDSTSavings()))
    :
    new Long((59*60*1000) + (57*1000) )
)]]></defaultValueExpression>
	</parameter>
	<parameter name="_p_date_from" class="java.lang.Long" isForPrompting="false">
		<defaultValueExpression><![CDATA[$P{p_date_from}.getTime()]]></defaultValueExpression>
	</parameter>
	<parameter name="_p_date_to" class="java.lang.Long" isForPrompting="false">
		<defaultValueExpression><![CDATA[$P{p_date_to}.getTime()]]></defaultValueExpression>
	</parameter>
	<parameter name="_p_apps_id" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA[($P{p_apps_id} != null && !"-1".equals($P{p_apps_id} )) ?
    " AND APS.PROCESSID = " + $P{p_apps_id} + " "
    : ""]]></defaultValueExpression>
	</parameter>
	<parameter name="BONITA_LOGGED_USER" class="java.lang.String"/>
	<parameter name="_p_state_name" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA[($P{p_state_name} != null && !"%".equals($P{p_state_name})) ?
				(("completed".equals($P{p_state_name})) ? " AND (TSK.STATENAME = 'completed' OR TSK.STATENAME = 'aborted') " : " AND TSK.STATENAME = '" + $P{p_state_name} + "' ") :
				" AND TSK.KIND in ('manual','user') "]]></defaultValueExpression>
	</parameter>
	<parameter name="BONITA_LOCALE_LANGUAGE" class="java.lang.String"/>
	<queryString language="BONITASQL">
		<![CDATA[SELECT
		TSK_TABLE.TSK_STATE_NAME,
		TSK_TABLE.TSK_REACHED_STATE_DATE,
		count(*) as TSK_COUNT
FROM
(
	SELECT
		TSK.ID AS TSK_FLOW_NODE_DEFINITION_ID,
		TSK.DISPLAYNAME AS TSK_DISPLAY_NAME,
		TSK.STATENAME AS TSK_STATE_NAME,
		(FLOOR(TSK.REACHEDSTATEDATE / $P{p_period_duration}) ) AS TSK_REACHED_STATE_DATE,
		CS.ID AS CS_ID,
		0 AS CS_ARCHIVED_ID,
		'OPEN' as CS_STATE_NAME,
		APS.PROCESSID AS APS_PROCESS_ID,
		APS.NAME AS APS_NAME,
		USR.FIRSTNAME AS USR_FIRSTNAME,
		USR.LASTNAME AS USR_LASTNAME
	FROM flownode_instance TSK
	INNER JOIN process_instance CS ON TSK.ROOTCONTAINERID = CS.ID
	INNER JOIN process_definition APS ON CS.PROCESSDEFINITIONID = APS.PROCESSID
	LEFT OUTER JOIN user_ USR ON (TSK.ASSIGNEEID = USR.ID AND USR.TENANTID = $P{BONITA_TENANT_ID})
	WHERE TSK.KIND in ('manual','user')
    AND TSK.TENANTID = $P{BONITA_TENANT_ID}
	AND CS.TENANTID = $P{BONITA_TENANT_ID}
	AND APS.TENANTID = $P{BONITA_TENANT_ID}
	$P!{_p_state_name}
	AND TSK.REACHEDSTATEDATE BETWEEN $P{_p_date_from} AND $P{_p_date_to}
	$P!{_p_apps_id}
    UNION
    SELECT
		TSK.ID AS TSK_FLOW_NODE_DEFINITION_ID,
		TSK.DISPLAYNAME AS TSK_DISPLAY_NAME,
		(CASE
	         WHEN TSK.STATENAME = 'aborted'
	             THEN  'completed'
	             ELSE TSK.STATENAME
	    END) AS TSK_STATE_NAME,
		(FLOOR(TSK.REACHEDSTATEDATE / $P{p_period_duration}) ) AS TSK_REACHED_STATE_DATE,
		CS.ID AS CS_ID,
		0 AS CS_ARCHIVED_ID,
		'OPEN' as CS_STATE_NAME,
		APS.PROCESSID AS APS_PROCESS_ID,
		APS.NAME AS APS_NAME,
		USR.FIRSTNAME AS USR_FIRSTNAME,
		USR.LASTNAME AS USR_LASTNAM
	FROM arch_flownode_instance TSK
	INNER JOIN process_instance  CS ON TSK.ROOTCONTAINERID = CS.ID
	INNER JOIN process_definition APS ON CS.PROCESSDEFINITIONID = APS.PROCESSID
	LEFT OUTER JOIN user_ USR ON (TSK.ASSIGNEEID = USR.ID AND USR.TENANTID = $P{BONITA_TENANT_ID})
	WHERE TSK.KIND in ('manual','user')
	AND TSK.STATEID in (2,16)
	AND TSK.TENANTID = $P{BONITA_TENANT_ID}
	AND CS.TENANTID = $P{BONITA_TENANT_ID}
	AND APS.TENANTID = $P{BONITA_TENANT_ID}
	$P!{_p_state_name}
	AND TSK.REACHEDSTATEDATE BETWEEN $P{_p_date_from} AND $P{_p_date_to}
	$P!{_p_apps_id}
	UNION
	SELECT
		TSK.ID AS TSK_FLOW_NODE_DEFINITION_ID,
		TSK.DISPLAYNAME AS TSK_DISPLAY_NAME,
		(CASE
	         WHEN TSK.STATENAME = 'aborted'
	             THEN  'completed'
	             ELSE TSK.STATENAME
	    END) AS TSK_STATE_NAME,
		(FLOOR(TSK.REACHEDSTATEDATE / $P{p_period_duration}) ) AS TSK_REACHED_STATE_DATE,
		CS.SOURCEOBJECTID AS CS_ID,
		CS.ID AS CS_ARCHIVED_ID,
		'ARCHIVED' as CS_STATE_NAME,
		APS.PROCESSID AS APS_PROCESS_ID,
		APS.NAME AS APS_NAME,
		USR.FIRSTNAME AS USR_FIRSTNAME,
		USR.LASTNAME AS USR_LASTNAM
	FROM arch_flownode_instance TSK
	INNER JOIN arch_process_instance CS ON TSK.ROOTCONTAINERID = CS.SOURCEOBJECTID
	INNER JOIN process_definition APS ON CS.PROCESSDEFINITIONID = APS.PROCESSID
	LEFT OUTER JOIN user_ USR ON (TSK.ASSIGNEEID = USR.ID AND USR.TENANTID = $P{BONITA_TENANT_ID})
	WHERE TSK.KIND in ('manual','user')
	AND TSK.STATEID in (2,16)
	AND TSK.TENANTID = $P{BONITA_TENANT_ID}
	AND CS.STATEID in (3,4,6)
	AND CS.TENANTID = $P{BONITA_TENANT_ID}
	AND APS.TENANTID = $P{BONITA_TENANT_ID}
	$P!{_p_state_name}
	AND TSK.REACHEDSTATEDATE BETWEEN $P{_p_date_from} AND $P{_p_date_to}
	$P!{_p_apps_id}
) TSK_TABLE
GROUP BY TSK_TABLE.TSK_STATE_NAME, TSK_TABLE.TSK_REACHED_STATE_DATE
ORDER BY 2, 1]]>
	</queryString>
	<field name="TSK_STATE_NAME" class="java.lang.String"/>
	<field name="TSK_REACHED_STATE_DATE" class="java.lang.Long"/>
	<field name="TSK_COUNT" class="java.math.BigDecimal"/>
	<variable name="opened_tsk_count" class="java.lang.Long" calculation="Sum">
		<variableExpression><![CDATA["ready".equals($F{TSK_STATE_NAME}) ? $F{TSK_COUNT} : 0]]></variableExpression>
		<initialValueExpression><![CDATA[0]]></initialValueExpression>
	</variable>
	<variable name="archived_tsk_count" class="java.lang.Long" calculation="Sum">
		<variableExpression><![CDATA["completed".equals($F{TSK_STATE_NAME}) ? $F{TSK_COUNT} : 0]]></variableExpression>
		<initialValueExpression><![CDATA[0]]></initialValueExpression>
	</variable>
	<variable name="failed_tsk_count" class="java.lang.Long" calculation="Sum">
		<variableExpression><![CDATA["failed".equals($F{TSK_STATE_NAME}) ? $F{TSK_COUNT} : 0]]></variableExpression>
		<initialValueExpression><![CDATA[0]]></initialValueExpression>
	</variable>
	<variable name="dateformat" class="java.text.SimpleDateFormat">
		<variableExpression><![CDATA[new SimpleDateFormat($P{BONITA_LOCALE_DATE_FORMAT}, $P{REPORT_LOCALE})]]></variableExpression>
		<initialValueExpression><![CDATA[new SimpleDateFormat($P{BONITA_LOCALE_DATE_FORMAT}, $P{REPORT_LOCALE})]]></initialValueExpression>
	</variable>
	<variable name="dateTimeformat" class="java.text.SimpleDateFormat">
		<variableExpression><![CDATA[new SimpleDateFormat($P{BONITA_LOCALE_DATETIME_FORMAT}, $P{REPORT_LOCALE})]]></variableExpression>
		<initialValueExpression><![CDATA[new SimpleDateFormat($P{BONITA_LOCALE_DATETIME_FORMAT}, $P{REPORT_LOCALE})]]></initialValueExpression>
	</variable>
	<variable name="timeFormat" class="java.text.SimpleDateFormat">
		<variableExpression><![CDATA[new SimpleDateFormat($P{BONITA_LOCALE_TIME_FORMAT}, $P{REPORT_LOCALE})]]></variableExpression>
		<initialValueExpression><![CDATA[new SimpleDateFormat($P{BONITA_LOCALE_TIME_FORMAT}, $P{REPORT_LOCALE})]]></initialValueExpression>
	</variable>
	<title>
		<band height="480" splitType="Stretch">
			<frame>
				<reportElement uuid="06417c61-ae98-4c12-aed1-8c7077fc6a27" key="header" x="0" y="0" width="1210" height="106"/>
				<textField>
					<reportElement uuid="6d6608ef-4caa-4c6a-a2bb-d66d00d97cfa" key="title" style="bonita_report_title" x="0" y="0" width="725" height="33">
						<property name="net.sf.jasperreports.export.html.class" value="bonita_report_title"/>
						<property name="net.sf.jasperreports.export.html.tag" value="h1"/>
					</reportElement>
					<textElement markup="none"/>
					<textFieldExpression><![CDATA[$R{task_list.title}]]></textFieldExpression>
				</textField>
				<textField isStretchWithOverflow="true">
					<reportElement uuid="799ab7f9-3308-424f-a145-c9053f94e390" style="bonita_report_description" x="0" y="68" width="1210" height="35">
						<property name="net.sf.jasperreports.export.html.class" value="bonita_report_description"/>
					</reportElement>
					<textElement markup="none"/>
					<textFieldExpression><![CDATA[$R{task_list.description}]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement uuid="4aee1e68-3023-4291-a16e-8368f21b4038" style="bonita_report_text_bold" x="337" y="41" width="100" height="16">
						<property name="net.sf.jasperreports.export.html.class" value="bonita_report_text_bold"/>
					</reportElement>
					<box leftPadding="2"/>
					<textElement/>
					<textFieldExpression><![CDATA[$R{task_list.generated_on}]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement uuid="2c58d571-f820-4747-ba4d-3f7c92f613c3" style="bonita_report_text_bold" x="17" y="41" width="100" height="16">
						<property name="net.sf.jasperreports.export.html.class" value="bonita_report_text_bold"/>
					</reportElement>
					<box leftPadding="2"/>
					<textElement/>
					<textFieldExpression><![CDATA[$R{task_list.generated_by}]]></textFieldExpression>
				</textField>
				<textField pattern="">
					<reportElement uuid="6563ffe0-8b88-45e1-8499-63441fffe8ec" style="bonita_report_text_bold" x="438" y="41" width="190" height="16">
						<property name="net.sf.jasperreports.export.html.class" value="bonita_report_text "/>
					</reportElement>
					<textElement/>
					<textFieldExpression><![CDATA[$V{dateTimeformat}.format(new Date())]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement uuid="97eae7e8-58f5-48e6-9395-10115e918b70" style="bonita_report_text_bold" x="118" y="41" width="190" height="16">
						<property name="net.sf.jasperreports.export.html.class" value="bonita_report_text "/>
					</reportElement>
					<textElement/>
					<textFieldExpression><![CDATA[$P{BONITA_LOGGED_USER}]]></textFieldExpression>
				</textField>
				<textField evaluationTime="Report" hyperlinkType="Reference">
					<reportElement uuid="58dc23c3-3139-498f-82d4-43121984c959" x="1110" y="0" width="100" height="25">
						<property name="net.sf.jasperreports.export.html.class" value="exportCell"/>
						<printWhenExpression><![CDATA[("HTML".equals($P{BONITA_EXPORT_FORMAT}))]]></printWhenExpression>
					</reportElement>
					<textElement textAlignment="Center" verticalAlignment="Middle"/>
					<textFieldExpression><![CDATA[$R{task_list.export}]]></textFieldExpression>
					<hyperlinkReferenceExpression><![CDATA[$P{BONITA_EXPORT_TO_PDF}]]></hyperlinkReferenceExpression>
				</textField>
				<line>
					<reportElement uuid="4476a588-8717-4e41-8e6b-44058b6fbd28" key="line1" style="bonita_report_shape_line" positionType="Float" x="0" y="105" width="1210" height="1">
						<property name="net.sf.jasperreports.export.html.class" value="bonita_report_shape_line"/>
					</reportElement>
				</line>
				<image>
					<reportElement uuid="02262157-ed72-4a60-99c2-812533809d6a" x="0" y="41" width="16" height="16"/>
					<imageExpression><![CDATA[$P{BONITA_REPORT_FOLDER} +  "/img/avatar-default.gif"]]></imageExpression>
				</image>
				<image>
					<reportElement uuid="f519ee3b-2e05-43a9-b8b7-a4fe288a0944" x="320" y="41" width="16" height="16"/>
					<imageExpression><![CDATA[$P{BONITA_REPORT_FOLDER} + "/img/date_16x16.png"]]></imageExpression>
				</image>
			</frame>
			<frame>
				<reportElement uuid="a39bcfef-89ac-4583-a69f-a6a4fc1e23b7" key="parameters" positionType="Float" x="0" y="106" width="1210" height="183"/>
				<box>
					<bottomPen lineWidth="0.0"/>
				</box>
				<textField>
					<reportElement uuid="a2fa438e-57e7-4df1-b781-32099b522fc1" style="bonita_report_section_title" x="0" y="1" width="492" height="25">
						<property name="net.sf.jasperreports.export.html.class" value="bonita_report_section_title "/>
						<property name="net.sf.jasperreports.export.html.tag" value="h1"/>
					</reportElement>
					<textElement markup="none"/>
					<textFieldExpression><![CDATA[$R{task_list.parameter_title}]]></textFieldExpression>
				</textField>
				<componentElement>
					<reportElement uuid="6bf0fd6c-ddab-4574-bb8b-3b2cc3501e2c" x="0" y="26" width="1210" height="156">
						<printWhenExpression><![CDATA["HTML".equals($P{BONITA_EXPORT_FORMAT})]]></printWhenExpression>
					</reportElement>
					<hc:html xmlns:hc="http://jasperreports.sourceforge.net/htmlcomponent" xsi:schemaLocation="http://jasperreports.sourceforge.net/htmlcomponent http://jasperreports.sourceforge.net/xsd/htmlcomponent.xsd" scaleType="RetainShape" horizontalAlign="Left" verticalAlign="Top">
						<hc:htmlContentExpression><![CDATA[$P{BONITA_HTML_FORM}]]></hc:htmlContentExpression>
					</hc:html>
				</componentElement>
				<line>
					<reportElement uuid="26352e88-aa4e-44a5-b612-92f6d63cef9d" key="line2" style="bonita_report_shape_line" positionType="Float" x="0" y="182" width="1210" height="1">
						<property name="net.sf.jasperreports.export.html.class" value="bonita_report_shape_line"/>
					</reportElement>
				</line>
				<frame>
					<reportElement uuid="a9bb7b1e-1473-4e55-a6e7-3aac08ded9e5" key="PDF parameters" x="0" y="33" width="1210" height="50">
						<printWhenExpression><![CDATA["PDF".equals($P{BONITA_EXPORT_FORMAT})]]></printWhenExpression>
					</reportElement>
					<textField>
						<reportElement uuid="a1cbb863-cf1c-4248-8713-8a0ffccef43b" x="10" y="0" width="322" height="20"/>
						<textElement/>
						<textFieldExpression><![CDATA[$R{from:} + " "+ $V{dateformat}.format($P{p_date_from})+" " +$R{to:}  + " "+$V{dateformat}.format($P{p_date_to})]]></textFieldExpression>
					</textField>
					<textField>
						<reportElement uuid="263a9e62-632f-4157-8700-384571944167" x="342" y="0" width="296" height="20"/>
						<textElement/>
						<textFieldExpression><![CDATA[$R{State} + ": "+ ("%".equals($P{p_state_name}) ? $R{All}  : str($P{p_state_name}) )]]></textFieldExpression>
					</textField>
					<textField>
						<reportElement uuid="5a106db5-8da6-4b6f-b64b-b173164902d9" x="648" y="0" width="296" height="20">
							<printWhenExpression><![CDATA["-1".equals($P{p_apps_id})]]></printWhenExpression>
						</reportElement>
						<textElement/>
						<textFieldExpression><![CDATA[$R{Apps} + ": "+ $R{All}]]></textFieldExpression>
					</textField>
					<componentElement>
						<reportElement uuid="af1fdafd-3f79-439c-ae08-c1bc67502658" x="648" y="0" width="296" height="21">
							<printWhenExpression><![CDATA[!"-1".equals($P{p_apps_id})]]></printWhenExpression>
						</reportElement>
						<jr:list xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd" printOrder="Vertical">
							<datasetRun subDataset="AppsName" uuid="6b0d06ec-7170-4b9d-a74e-430471edd7be">
								<parametersMapExpression><![CDATA[$P{REPORT_PARAMETERS_MAP}]]></parametersMapExpression>
								<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
							</datasetRun>
							<jr:listContents height="21" width="296">
								<textField>
									<reportElement uuid="3952d843-a78a-430d-93c9-6d698e77bb1f" x="0" y="0" width="296" height="20"/>
									<textElement/>
									<textFieldExpression><![CDATA[$R{Apps} + ": "+ $F{APS_NAME}]]></textFieldExpression>
								</textField>
							</jr:listContents>
						</jr:list>
					</componentElement>
				</frame>
			</frame>
			<textField evaluationTime="Report">
				<reportElement uuid="6a1f3ea4-8aa4-4259-b609-d68649ce5528" key="NO-DATA" x="312" y="289" width="587" height="20">
					<property name="net.sf.jasperreports.export.html.class" value="bonita_report_description"/>
					<printWhenExpression><![CDATA[$F{TSK_STATE_NAME} == null && $V{REPORT_COUNT} <= 0]]></printWhenExpression>
				</reportElement>
				<textElement markup="none"/>
				<textFieldExpression><![CDATA[$R{task_list.nodata}]]></textFieldExpression>
			</textField>
			<frame>
				<reportElement uuid="28198895-1acc-401e-bd3e-849758e00815" key="graph &amp; task_counts" positionType="Float" x="0" y="289" width="1210" height="190">
					<printWhenExpression><![CDATA[$F{TSK_STATE_NAME} != null]]></printWhenExpression>
				</reportElement>
				<stackedBarChart>
					<chart isShowLegend="false" evaluationTime="Report" customizerClass="org.bonitasoft.report.chart.customizer.BonitaBarChartCustomizer" renderType="svg" theme="default">
						<reportElement uuid="a3193fd3-1a6f-4717-8398-99621589140c" x="0" y="0" width="725" height="177">
							<property name="PredefinedColors" value="ready:#cced8b;failed:#f1bda2;completed:#92caee"/>
							<property name="MaximumBarWidth1" value="0.05"/>
							<property name="ScriptRenderer" value="renderer.setMaximumBarWidth(0.02);"/>
						</reportElement>
						<chartTitle/>
						<chartSubtitle/>
						<chartLegend position="Right"/>
					</chart>
					<categoryDataset>
						<categorySeries>
							<seriesExpression><![CDATA[$F{TSK_STATE_NAME}]]></seriesExpression>
							<categoryExpression><![CDATA[(
    (org.joda.time.Hours.hoursBetween(new org.joda.time.DateTime($P{p_date_from}.getTime()), new org.joda.time.DateTime($P{p_date_to}.getTime()))).getHours()  > 24 ?
    $V{dateformat}.format(new Date($F{TSK_REACHED_STATE_DATE} * $P{p_period_duration}))
    :
    $V{timeFormat}.format(new Date($F{TSK_REACHED_STATE_DATE} * $P{p_period_duration}))
)]]></categoryExpression>
							<valueExpression><![CDATA[$F{TSK_COUNT}]]></valueExpression>
							<itemHyperlink hyperlinkType="Reference">
								<hyperlinkReferenceExpression><![CDATA[$P{BONITA_REPORT_URL}
+"&p_date_from="+$F{TSK_REACHED_STATE_DATE} * $P{p_period_duration}
+"&p_date_to="+($F{TSK_REACHED_STATE_DATE} * $P{p_period_duration}+$P{p_period_duration_plus})
+"&p_state_name="+$F{TSK_STATE_NAME}
+"&p_apps_id="+($P{p_apps_id} != null ? $P{p_apps_id} : "-1")]]></hyperlinkReferenceExpression>
								<hyperlinkWhenExpression><![CDATA[(("HTML".equals($P{BONITA_EXPORT_FORMAT})) ? true : false)]]></hyperlinkWhenExpression>
								<hyperlinkTooltipExpression><![CDATA[String.valueOf($F{TSK_COUNT})]]></hyperlinkTooltipExpression>
							</itemHyperlink>
						</categorySeries>
					</categoryDataset>
					<barPlot>
						<plot/>
						<itemLabel/>
						<categoryAxisLabelExpression><![CDATA[(
    (org.joda.time.Hours.hoursBetween(new org.joda.time.DateTime($P{p_date_from}.getTime()), new org.joda.time.DateTime($P{p_date_to}.getTime()))).getHours()  > 24 ?
        $R{task_list.graph.x.title.days}
    :
        $R{task_list.graph.x.title.hour}
)]]></categoryAxisLabelExpression>
						<categoryAxisFormat>
							<axisFormat/>
						</categoryAxisFormat>
						<valueAxisLabelExpression><![CDATA[$R{task_list.graph.y.title}]]></valueAxisLabelExpression>
						<valueAxisFormat>
							<axisFormat/>
						</valueAxisFormat>
					</barPlot>
				</stackedBarChart>
				<line>
					<reportElement uuid="855ea25f-ed3a-4d1b-b669-b7a0fba3fbbd" key="line3" style="bonita_report_shape_line" positionType="Float" x="0" y="188" width="1210" height="1">
						<property name="net.sf.jasperreports.export.html.class" value="bonita_report_shape_line"/>
					</reportElement>
				</line>
				<frame>
					<reportElement uuid="79894e78-f251-4be7-8d30-d8b1e581466a" x="775" y="70" width="390" height="64"/>
					<rectangle>
						<reportElement uuid="09356a79-d01d-48c0-aaa9-551acb9f8655" key="legend-opend" x="0" y="0" width="20" height="20" backcolor="#CCED8A">
							<printWhenExpression><![CDATA["ready".equals($P{p_state_name}) || "%".equals($P{p_state_name})]]></printWhenExpression>
						</reportElement>
						<graphicElement>
							<pen lineWidth="0.0"/>
						</graphicElement>
					</rectangle>
					<textField evaluationTime="Report" isBlankWhenNull="true" hyperlinkType="Reference">
						<reportElement uuid="6ac72c8b-cd32-49f5-9728-f56a08f73ee6" style="bonita_report_hyperlink" x="22" y="0" width="264" height="20" isRemoveLineWhenBlank="true">
							<propertyExpression name="net.sf.jasperreports.export.html.class"><![CDATA[(!"ready".equals($P{p_state_name})) ?
    "bonita_report_hyperlink"
:
     "bonita_report_hyperlink_none"]]></propertyExpression>
							<printWhenExpression><![CDATA["ready".equals($P{p_state_name}) || "%".equals($P{p_state_name})]]></printWhenExpression>
						</reportElement>
						<textElement verticalAlignment="Middle"/>
						<textFieldExpression><![CDATA["(" + $V{opened_tsk_count} + ") " + $R{task_list.opened_tasks_count}]]></textFieldExpression>
						<hyperlinkReferenceExpression><![CDATA[$P{BONITA_REPORT_URL}+"&p_date_from="+$P{_p_date_from}+"&p_date_to="+$P{_p_date_to}+"&p_state_name=ready"+"&p_apps_id="+($P{p_apps_id} != null ? $P{p_apps_id} : "-1")]]></hyperlinkReferenceExpression>
						<hyperlinkWhenExpression><![CDATA[("HTML".equals($P{BONITA_EXPORT_FORMAT}) && (!"ready".equals($P{p_state_name})))]]></hyperlinkWhenExpression>
						<hyperlinkParameter name="state_name">
							<hyperlinkParameterExpression><![CDATA["opened"]]></hyperlinkParameterExpression>
						</hyperlinkParameter>
						<hyperlinkParameter name="p_date_from">
							<hyperlinkParameterExpression><![CDATA[$P{p_date_from}]]></hyperlinkParameterExpression>
						</hyperlinkParameter>
						<hyperlinkParameter name="p_date_to">
							<hyperlinkParameterExpression><![CDATA[$P{p_date_to}]]></hyperlinkParameterExpression>
						</hyperlinkParameter>
					</textField>
					<rectangle>
						<reportElement uuid="1bbcfeea-84d2-4a1e-8034-e6192bbf98f9" key="legend-completed" x="0" y="22" width="20" height="20" backcolor="#73BCEC">
							<printWhenExpression><![CDATA["completed".equals($P{p_state_name}) || "%".equals($P{p_state_name})]]></printWhenExpression>
						</reportElement>
						<graphicElement>
							<pen lineWidth="0.0"/>
						</graphicElement>
					</rectangle>
					<textField evaluationTime="Report" isBlankWhenNull="true" hyperlinkType="Reference">
						<reportElement uuid="9192024a-5006-47a3-9605-5e79bb0feb2b" style="bonita_report_hyperlink" x="22" y="22" width="264" height="20" isRemoveLineWhenBlank="true">
							<propertyExpression name="net.sf.jasperreports.export.html.class"><![CDATA[(!"completed".equals($P{p_state_name})) ?
    "bonita_report_hyperlink"
:
     "bonita_report_hyperlink_none"]]></propertyExpression>
							<printWhenExpression><![CDATA["completed".equals($P{p_state_name}) || "%".equals($P{p_state_name})]]></printWhenExpression>
						</reportElement>
						<textElement verticalAlignment="Middle"/>
						<textFieldExpression><![CDATA["(" + $V{archived_tsk_count} + ") " + $R{task_list.archived_tasks_count}]]></textFieldExpression>
						<hyperlinkReferenceExpression><![CDATA[$P{BONITA_REPORT_URL}+"&p_date_from="+$P{_p_date_from}+"&p_date_to="+$P{_p_date_to}+"&p_state_name=completed"+"&p_apps_id="+($P{p_apps_id} != null ? $P{p_apps_id} : "-1")]]></hyperlinkReferenceExpression>
						<hyperlinkWhenExpression><![CDATA[("HTML".equals($P{BONITA_EXPORT_FORMAT}) && (!"completed".equals($P{p_state_name})))]]></hyperlinkWhenExpression>
					</textField>
					<rectangle>
						<reportElement uuid="b6311e57-9ae0-4035-807e-f7f40fc72e57" key="legend-failed" x="0" y="44" width="20" height="20" backcolor="#EDAC88">
							<printWhenExpression><![CDATA["failed".equals($P{p_state_name}) || "%".equals($P{p_state_name})]]></printWhenExpression>
						</reportElement>
						<graphicElement>
							<pen lineWidth="0.0"/>
						</graphicElement>
					</rectangle>
					<textField evaluationTime="Report" isBlankWhenNull="true" hyperlinkType="Reference">
						<reportElement uuid="ae43973e-72ca-46d2-8da6-407796941ead" style="bonita_report_hyperlink" x="22" y="44" width="264" height="20" isRemoveLineWhenBlank="true">
							<propertyExpression name="net.sf.jasperreports.export.html.class"><![CDATA[(!"failed".equals($P{p_state_name})) ?
    "bonita_report_hyperlink"
:
     "bonita_report_hyperlink_none"]]></propertyExpression>
							<printWhenExpression><![CDATA["failed".equals($P{p_state_name}) || "%".equals($P{p_state_name})]]></printWhenExpression>
						</reportElement>
						<textElement verticalAlignment="Middle"/>
						<textFieldExpression><![CDATA["(" + $V{failed_tsk_count} + ") " + $R{task_list.failed_tasks_count}]]></textFieldExpression>
						<hyperlinkReferenceExpression><![CDATA[$P{BONITA_REPORT_URL}+"&p_date_from="+$P{_p_date_from}+"&p_date_to="+$P{_p_date_to}+"&p_state_name=failed"+"&p_apps_id="+($P{p_apps_id} != null ? $P{p_apps_id} : "-1")]]></hyperlinkReferenceExpression>
						<hyperlinkWhenExpression><![CDATA[("HTML".equals($P{BONITA_EXPORT_FORMAT}) && (!"failed".equals($P{p_state_name})))]]></hyperlinkWhenExpression>
					</textField>
				</frame>
			</frame>
		</band>
	</title>
	<pageHeader>
		<band height="20" splitType="Stretch">
			<frame>
				<reportElement uuid="36bd253a-110a-4d9c-af13-f181fafa8b62" key="table header" x="0" y="0" width="1210" height="20">
					<printWhenExpression><![CDATA[((!"%".equals($P{p_state_name}) || "PDF".equals($P{BONITA_EXPORT_FORMAT})) && ( $F{TSK_STATE_NAME} != null))]]></printWhenExpression>
				</reportElement>
				<textField>
					<reportElement uuid="c5203ab9-2e3a-4e73-a3fa-d9daabc9ddd9" style="bonita_report_table_header" x="0" y="0" width="250" height="20">
						<property name="net.sf.jasperreports.export.html.tag.tr.class" value="tr"/>
						<property name="net.sf.jasperreports.export.html.class" value="th th_1"/>
						<property name="net.sf.jasperreports.export.html.tag.table.class" value="table_report"/>
						<property name="net.sf.jasperreports.export.html.tag.td" value="th"/>
						<property name="net.sf.jasperreports.export.html.tag.table.part" value="thead"/>
						<property name="net.sf.jasperreports.export.html.tag.table.part.class" value="thead"/>
					</reportElement>
					<textElement/>
					<textFieldExpression><![CDATA[$R{task_list.table_header_task}]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement uuid="bba9baa4-d944-4b5f-838e-227a1c42f093" style="bonita_report_table_header" x="250" y="0" width="200" height="20">
						<property name="net.sf.jasperreports.export.html.class" value="th"/>
						<property name="net.sf.jasperreports.export.html.tag.td" value="th"/>
					</reportElement>
					<textElement/>
					<textFieldExpression><![CDATA[$R{task_list.table_header_case}]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement uuid="c53111d9-fd1a-486c-a100-d7c791ac26f8" style="bonita_report_table_header" x="450" y="0" width="350" height="20">
						<property name="net.sf.jasperreports.export.html.class" value="th"/>
						<property name="net.sf.jasperreports.export.html.tag.td" value="th"/>
					</reportElement>
					<textElement/>
					<textFieldExpression><![CDATA[$R{task_list.table_header_apps}]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement uuid="7ec2152b-2cb3-493d-b034-e47040b4ae62" style="bonita_report_table_header" x="1050" y="0" width="160" height="20">
						<property name="net.sf.jasperreports.export.html.class" value="th"/>
						<property name="net.sf.jasperreports.export.html.tag.td" value="th"/>
						<property name="net.sf.jasperreports.export.html.tag.table.part" value="thead"/>
					</reportElement>
					<textElement/>
					<textFieldExpression><![CDATA[$R{task_list.table_header_due_date}]]></textFieldExpression>
				</textField>
				<textField>
					<reportElement uuid="fe74abde-c640-46c4-8fae-00a5c51b2df4" style="bonita_report_table_header" x="800" y="0" width="250" height="20">
						<property name="net.sf.jasperreports.export.html.class" value="th"/>
						<property name="net.sf.jasperreports.export.html.tag.td" value="th"/>
					</reportElement>
					<textElement/>
					<textFieldExpression><![CDATA[$R{task_list.table_header_assigned_to}]]></textFieldExpression>
				</textField>
			</frame>
		</band>
	</pageHeader>
	<summary>
		<band height="45" splitType="Stretch">
			<componentElement>
				<reportElement uuid="d2d26c29-8365-4441-ae61-3696611da178" key="table rows" mode="Transparent" x="0" y="0" width="1210" height="45">
					<printWhenExpression><![CDATA[!"%".equals($P{p_state_name}) || "PDF".equals($P{BONITA_EXPORT_FORMAT})]]></printWhenExpression>
				</reportElement>
				<jr:list xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd" printOrder="Vertical">
					<datasetRun subDataset="task_list" uuid="d298f458-c63a-455a-a7d7-91916cedb52b">
						<parametersMapExpression><![CDATA[$P{REPORT_PARAMETERS_MAP}]]></parametersMapExpression>
						<datasetParameter name="REPORT_MAX_COUNT">
							<datasetParameterExpression><![CDATA["HTML".equals($P{BONITA_EXPORT_FORMAT}) ? $P{BONITA_HTML_MAX_REPORT_COUNT} : $P{REPORT_MAX_COUNT}]]></datasetParameterExpression>
						</datasetParameter>
						<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					</datasetRun>
					<jr:listContents height="45" width="1210">
						<textField hyperlinkType="Reference">
							<reportElement uuid="7049add2-9cb1-4d13-b2fe-d585da99ec6b" style="bonita_report_table_line" x="0" y="0" width="250" height="45">
								<property name="net.sf.jasperreports.export.html.class" value="td"/>
								<property name="net.sf.jasperreports.export.html.tag.tr.class" value="tr"/>
								<property name="net.sf.jasperreports.export.html.tag.table.class" value="table_report"/>
								<property name="net.sf.jasperreports.export.html.tag.table.part.class" value="tbody"/>
								<property name="net.sf.jasperreports.export.html.tag.table.part" value="tbody"/>
							</reportElement>
							<textElement/>
							<textFieldExpression><![CDATA[$F{TSK_DISPLAY_NAME}]]></textFieldExpression>
							<hyperlinkReferenceExpression><![CDATA[$P{BONITA_BASE_URL}+"/portal/homepage#?id="+$F{TSK_FLOW_NODE_DEFINITION_ID}+"&_p=taskmoredetailsadmin&isarchived="+"completed".equals($F{TSK_STATE_NAME})+"&_pf="+$P{BONITA_LOGGED_USER_ID}]]></hyperlinkReferenceExpression>
							<hyperlinkWhenExpression><![CDATA[(("HTML".equals($P{BONITA_EXPORT_FORMAT})) ? true : false)]]></hyperlinkWhenExpression>
						</textField>
						<textField isStretchWithOverflow="true" hyperlinkType="Reference">
							<reportElement uuid="f0336dfa-a822-4d16-b444-d394b5febe4d" style="bonita_report_table_line" x="450" y="0" width="350" height="45">
								<property name="net.sf.jasperreports.export.html.class" value="td"/>
							</reportElement>
							<textElement/>
							<textFieldExpression><![CDATA[$F{APS_NAME}]]></textFieldExpression>
							<hyperlinkReferenceExpression><![CDATA[$P{BONITA_BASE_URL}+"/portal/homepage#?id="+$F{APS_PROCESS_ID}+"&_p=processmoredetailsadmin&_pf="+$P{BONITA_LOGGED_USER_ID}]]></hyperlinkReferenceExpression>
							<hyperlinkWhenExpression><![CDATA[(("HTML".equals($P{BONITA_EXPORT_FORMAT})) ? true : false)]]></hyperlinkWhenExpression>
						</textField>
						<textField>
							<reportElement uuid="a41d4ffc-63ad-4678-b2fc-2329d0c8a295" style="bonita_report_table_line" x="800" y="0" width="250" height="45">
								<property name="net.sf.jasperreports.export.html.class" value="td"/>
							</reportElement>
							<textElement/>
							<textFieldExpression><![CDATA[($F{USR_FIRSTNAME} != "null" ? $F{USR_FIRSTNAME} : "No")
+
($F{USR_LASTNAME} != "null" ? " " + $F{USR_LASTNAME}.toUpperCase() : " data")]]></textFieldExpression>
						</textField>
						<textField pattern="">
							<reportElement uuid="96afa0e8-3c8b-40ff-a205-60363138e8c3" style="bonita_report_table_line" x="1050" y="0" width="160" height="45">
								<property name="net.sf.jasperreports.export.html.class" value="td"/>
							</reportElement>
							<textElement/>
							<textFieldExpression><![CDATA[$V{dateTimeformat}.format(new Date($F{TSK_REACHED_STATE_DATE}))]]></textFieldExpression>
						</textField>
						<textField hyperlinkType="Reference">
							<reportElement uuid="1bd356d4-2044-49f0-8938-df28234a71f9" style="bonita_report_table_line" x="250" y="0" width="200" height="45">
								<property name="net.sf.jasperreports.export.html.class" value="td"/>
							</reportElement>
							<textElement/>
							<textFieldExpression><![CDATA[$F{CS_ID}]]></textFieldExpression>
							<hyperlinkReferenceExpression><![CDATA[$P{BONITA_BASE_URL}+"/portal/homepage#?id="+("ARCHIVED".equals($F{CS_STATE_NAME}) ? $F{CS_ARCHIVED_ID} : $F{CS_ID})+ "&_p=" +("ARCHIVED".equals($F{CS_STATE_NAME}) ? "archivedcasemoredetailsadmin" : "casemoredetailsadmin")+"&_pf="+$P{BONITA_LOGGED_USER_ID}]]></hyperlinkReferenceExpression>
							<hyperlinkWhenExpression><![CDATA[(("HTML".equals($P{BONITA_EXPORT_FORMAT})) ? true : false)]]></hyperlinkWhenExpression>
						</textField>
					</jr:listContents>
				</jr:list>
			</componentElement>
		</band>
	</summary>
	<noData>
		<band height="261">
			<textField>
				<reportElement uuid="3fc0043e-d4f2-4f13-b2d2-6817764e49f4" x="0" y="0" width="288" height="22"/>
				<textElement/>
				<textFieldExpression><![CDATA[$P{BONITA_TENANT_ID}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="8dd8c77f-8613-4622-a506-77a88586e723" x="0" y="22" width="288" height="20"/>
				<textElement/>
				<textFieldExpression><![CDATA[$P{BONITA_LOGGED_USER_ID}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="0abd783b-03bb-4976-86d5-aaf9ef32512c" x="0" y="42" width="288" height="20"/>
				<textElement/>
				<textFieldExpression><![CDATA[$P{BONITA_BASE_URL}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="804735ad-b53a-4747-92bd-a65b7b02a000" x="0" y="62" width="288" height="20"/>
				<textElement/>
				<textFieldExpression><![CDATA[$P{BONITA_REPORT_FOLDER}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="8372040c-1a08-4651-917b-19cc8fe67f64" mode="Opaque" x="0" y="121" width="288" height="20" backcolor="#F2E80E"/>
				<textElement/>
				<textFieldExpression><![CDATA[$P{p_date_from}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="85f0476b-bea1-428d-b072-014f8a29eac1" x="0" y="82" width="1210" height="39"/>
				<textElement/>
				<textFieldExpression><![CDATA[$P{BONITA_HTML_FORM}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="cdcfa6f8-8390-4295-a009-613e44addfa6" mode="Opaque" x="0" y="141" width="288" height="20" backcolor="#F2E80E"/>
				<textElement/>
				<textFieldExpression><![CDATA[$P{p_date_to}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="cdadc6c8-90bb-4a25-ad7a-9daadc709af6" x="0" y="161" width="288" height="20"/>
				<textElement/>
				<textFieldExpression><![CDATA[$P{p_state_name}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="90b77c75-5d95-4980-9348-f787ac5dfe8b" x="0" y="201" width="288" height="20"/>
				<textElement/>
				<textFieldExpression><![CDATA[$P{p_period_duration}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="cb615109-259b-4771-9d94-108621209ce0" x="0" y="181" width="288" height="20"/>
				<textElement/>
				<textFieldExpression><![CDATA[$P{p_apps_id}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="a08053c4-d05e-4330-8a86-049882de8ef9" x="0" y="221" width="288" height="20"/>
				<textElement/>
				<textFieldExpression><![CDATA[$P{_p_date_from}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement uuid="3a81a5db-5ffa-45d6-b9a7-5f3b44dbba3a" x="0" y="241" width="288" height="20"/>
				<textElement/>
				<textFieldExpression><![CDATA[$P{_p_date_to}]]></textFieldExpression>
			</textField>
		</band>
	</noData>
</jasperReport>
